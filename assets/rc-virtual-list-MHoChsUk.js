import{e as A,b as _,g as Lt,c as Y,d as Ze,_ as Vt,a as Wt,k as Ft}from"./@babel-D4-ut-Uz.js";import{c as Ae}from"./classnames-BaEkKJlL.js";import{R as Ht}from"./rc-resize-observer-B6_Tj1-Q.js";import{q as ee,N as qt,u as Le,i as bt}from"./rc-util-C7705Oj_.js";import{r as e}from"./react-Bi3d65_o.js";import{r as Rt}from"./react-dom-DttoD7qq.js";var zt=e.forwardRef(function(t,a){var D=t.height,R=t.offsetY,p=t.offsetX,h=t.children,l=t.prefixCls,C=t.onInnerResize,N=t.innerProps,E=t.rtl,w=t.extra,X={},m={display:"flex",flexDirection:"column"};return R!==void 0&&(X={height:D,position:"relative",overflow:"hidden"},m=A(A({},m),{},_(_(_(_(_({transform:"translateY(".concat(R,"px)")},E?"marginRight":"marginLeft",-p),"position","absolute"),"left",0),"right",0),"top",0))),e.createElement("div",{style:X},e.createElement(Ht,{onResize:function(K){K.offsetHeight&&C&&C()}},e.createElement("div",Lt({style:m,className:Ae(_({},"".concat(l,"-holder-inner"),l)),ref:a},N),h,w)))});function Gt(t){var a=t.children,D=t.setRef,R=e.useCallback(function(p){D(p)},[]);return e.cloneElement(a,{ref:R})}function Jt(t,a,D){var R=e.useState(t),p=Y(R,2),h=p[0],l=p[1],C=e.useState(null),N=Y(C,2),E=N[0],w=N[1];return e.useEffect(function(){var X=function(m,K,j){var f,x,U=m.length,V=K.length;if(U===0&&V===0)return null;U<V?(f=m,x=K):(f=K,x=m);var q={__EMPTY_ITEM__:!0};function G(J){return J!==void 0?j(J):q}for(var te=null,W=Math.abs(U-V)!==1,v=0;v<x.length;v+=1){var ne=G(f[v]);if(ne!==G(x[v])){te=v,W=W||ne!==G(x[v+1]);break}}return te===null?null:{index:te,multiple:W}}(h||[],t||[],a);(X==null?void 0:X.index)!==void 0&&w(t[X.index]),l(t)},[t]),[E]}zt.displayName="Filler";var St=(typeof navigator>"u"?"undefined":Ze(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const Tt=function(t,a,D,R){var p=e.useRef(!1),h=e.useRef(null),l=e.useRef({top:t,bottom:a,left:D,right:R});return l.current.top=t,l.current.bottom=a,l.current.left=D,l.current.right=R,function(C,N){var E=arguments.length>2&&arguments[2]!==void 0&&arguments[2],w=C?N<0&&l.current.left||N>0&&l.current.right:N<0&&l.current.top||N>0&&l.current.bottom;return E&&w?(clearTimeout(h.current),p.current=!1):w&&!p.current||(clearTimeout(h.current),p.current=!0,h.current=setTimeout(function(){p.current=!1},50)),!p.current&&w}};function Qt(t,a,D,R,p,h,l){var C=e.useRef(0),N=e.useRef(null),E=e.useRef(null),w=e.useRef(!1),X=Tt(a,D,R,p),m=e.useRef(null),K=e.useRef(null);return[function(j){if(t){ee.cancel(K.current),K.current=ee(function(){m.current=null},2);var f=j.deltaX,x=j.deltaY,U=j.shiftKey,V=f,q=x;(m.current==="sx"||!m.current&&U&&x&&!f)&&(V=x,q=0,m.current="sx");var G=Math.abs(V),te=Math.abs(q);m.current===null&&(m.current=h&&G>te?"x":"y"),m.current==="y"?function(W,v){ee.cancel(N.current),C.current+=v,E.current=v,X(!1,v)||(St||W.preventDefault(),N.current=ee(function(){var ne=w.current?10:1;l(C.current*ne),C.current=0}))}(j,q):function(W,v){l(v,!0),St||W.preventDefault()}(j,V)}},function(j){t&&(w.current=j.detail===E.current)}]}var Ut=function(){function t(){Wt(this,t),_(this,"maps",void 0),_(this,"id",0),this.maps=Object.create(null)}return Vt(t,[{key:"set",value:function(a,D){this.maps[a]=D,this.id+=1}},{key:"get",value:function(a){return this.maps[a]}}]),t}(),Et=14/15,Zt=10;function yt(t,a){return("touches"in t?t.touches[0]:t)[a?"pageX":"pageY"]}var wt=e.forwardRef(function(t,a){var D=t.prefixCls,R=t.rtl,p=t.scrollOffset,h=t.scrollRange,l=t.onStartMove,C=t.onStopMove,N=t.onScroll,E=t.horizontal,w=t.spinSize,X=t.containerSize,m=t.style,K=t.thumbStyle,j=e.useState(!1),f=Y(j,2),x=f[0],U=f[1],V=e.useState(null),q=Y(V,2),G=q[0],te=q[1],W=e.useState(null),v=Y(W,2),ne=v[0],J=v[1],ge=!R,ce=e.useRef(),He=e.useRef(),ze=e.useState(!1),re=Y(ze,2),Te=re[0],Q=re[1],pe=e.useRef(),oe=function(){clearTimeout(pe.current),Q(!0),pe.current=setTimeout(function(){Q(!1)},3e3)},B=h-X||0,Me=X-w||0,M=e.useMemo(function(){return p===0||B===0?0:p/B*Me},[p,B,Me]),ue=e.useRef({top:M,dragging:x,pageY:G,startTop:ne});ue.current={top:M,dragging:x,pageY:G,startTop:ne};var ve=function(I){U(!0),te(yt(I,E)),J(ue.current.top),l(),I.stopPropagation(),I.preventDefault()};e.useEffect(function(){var I=function(le){le.preventDefault()},$=ce.current,L=He.current;return $.addEventListener("touchstart",I,{passive:!1}),L.addEventListener("touchstart",ve,{passive:!1}),function(){$.removeEventListener("touchstart",I),L.removeEventListener("touchstart",ve)}},[]);var be=e.useRef();be.current=B;var ke=e.useRef();ke.current=Me,e.useEffect(function(){if(x){var I,$=function(le){var Re=ue.current,De=Re.dragging,_e=Re.pageY,Ne=Re.startTop;ee.cancel(I);var Se=ce.current.getBoundingClientRect(),Ye=X/(E?Se.width:Se.height);if(De){var Ce=(yt(le,E)-_e)*Ye,se=Ne;!ge&&E?se-=Ce:se+=Ce;var Ee=be.current,Ie=ke.current,je=Ie?se/Ie:0,fe=Math.ceil(je*Ee);fe=Math.max(fe,0),fe=Math.min(fe,Ee),I=ee(function(){N(fe,E)})}},L=function(){U(!1),C()};return window.addEventListener("mousemove",$,{passive:!0}),window.addEventListener("touchmove",$,{passive:!0}),window.addEventListener("mouseup",L,{passive:!0}),window.addEventListener("touchend",L,{passive:!0}),function(){window.removeEventListener("mousemove",$),window.removeEventListener("touchmove",$),window.removeEventListener("mouseup",L),window.removeEventListener("touchend",L),ee.cancel(I)}}},[x]),e.useEffect(function(){return oe(),function(){clearTimeout(pe.current)}},[p]),e.useImperativeHandle(a,function(){return{delayHidden:oe}});var ie="".concat(D,"-scrollbar"),y={position:"absolute",visibility:Te?null:"hidden"},Z={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return E?(y.height=8,y.left=0,y.right=0,y.bottom=0,Z.height="100%",Z.width=w,ge?Z.left=M:Z.right=M):(y.width=8,y.top=0,y.bottom=0,ge?y.right=0:y.left=0,Z.width="100%",Z.height=w,Z.top=M),e.createElement("div",{ref:ce,className:Ae(ie,_(_(_({},"".concat(ie,"-horizontal"),E),"".concat(ie,"-vertical"),!E),"".concat(ie,"-visible"),Te)),style:A(A({},y),m),onMouseDown:function(I){I.stopPropagation(),I.preventDefault()},onMouseMove:oe},e.createElement("div",{ref:He,className:Ae("".concat(ie,"-thumb"),_({},"".concat(ie,"-thumb-moving"),x)),style:A(A({},Z),K),onMouseDown:ve}))}),$t=20;function xt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=t/(arguments.length>1&&arguments[1]!==void 0?arguments[1]:0)*t;return isNaN(a)&&(a=0),a=Math.max(a,$t),Math.floor(a)}var en=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],tn=[],nn={overflowY:"auto",overflowAnchor:"none"};function rn(t,a){var D=t.prefixCls,R=D===void 0?"rc-virtual-list":D,p=t.className,h=t.height,l=t.itemHeight,C=t.fullHeight,N=C===void 0||C,E=t.style,w=t.data,X=t.children,m=t.itemKey,K=t.virtual,j=t.direction,f=t.scrollWidth,x=t.component,U=x===void 0?"div":x,V=t.onScroll,q=t.onVirtualScroll,G=t.onVisibleChange,te=t.innerProps,W=t.extraRender,v=t.styles,ne=Ft(t,en),J=e.useCallback(function(n){return typeof m=="function"?m(n):n==null?void 0:n[m]},[m]),ge=function(n){var r=e.useState(0),o=Y(r,2),d=o[0],s=o[1],H=e.useRef(new Map),g=e.useRef(new Ut),b=e.useRef();function z(){ee.cancel(b.current)}function T(){var S=arguments.length>0&&arguments[0]!==void 0&&arguments[0];z();var c=function(){H.current.forEach(function(u,i){if(u&&u.offsetParent){var O=qt(u),F=O.offsetHeight;g.current.get(i)!==F&&g.current.set(i,O.offsetHeight)}}),s(function(u){return u+1})};S?c():b.current=ee(c)}return e.useEffect(function(){return z},[]),[function(S,c){var u=n(S);H.current.get(u),c?(H.current.set(u,c),T()):H.current.delete(u)},T,g.current,d]}(J),ce=Y(ge,4),He=ce[0],ze=ce[1],re=ce[2],Te=ce[3],Q=!(K===!1||!h||!l),pe=e.useMemo(function(){return Object.values(re.maps).reduce(function(n,r){return n+r},0)},[re.id,re.maps]),oe=Q&&w&&(Math.max(l*w.length,pe)>h||!!f),B=j==="rtl",Me=Ae(R,_({},"".concat(R,"-rtl"),B),p),M=w||tn,ue=e.useRef(),ve=e.useRef(),be=e.useRef(),ke=e.useState(0),ie=Y(ke,2),y=ie[0],Z=ie[1],I=e.useState(0),$=Y(I,2),L=$[0],le=$[1],Re=e.useState(!1),De=Y(Re,2),_e=De[0],Ne=De[1],Se=function(){Ne(!0)},Ye=function(){Ne(!1)},Ce={getKey:J};function se(n){Z(function(r){var o=function(d){var s=d;return Number.isNaN(Ke.current)||(s=Math.min(s,Ke.current)),s=Math.max(s,0),s}(typeof n=="function"?n(r):n);return ue.current.scrollTop=o,o})}var Ee=e.useRef({start:0,end:M.length}),Ie=e.useRef(),je=Jt(M,J),fe=Y(je,1)[0];Ie.current=fe;var Pe=e.useMemo(function(){if(!Q)return{scrollHeight:void 0,start:0,end:M.length-1,offset:void 0};var n;if(!oe)return{scrollHeight:((n=ve.current)===null||n===void 0?void 0:n.offsetHeight)||0,start:0,end:M.length-1,offset:void 0};for(var r,o,d,s=0,H=M.length,g=0;g<H;g+=1){var b=M[g],z=J(b),T=re.get(z),S=s+(T===void 0?l:T);S>=y&&r===void 0&&(r=g,o=s),S>y+h&&d===void 0&&(d=g),s=S}return r===void 0&&(r=0,o=0,d=Math.ceil(h/l)),d===void 0&&(d=M.length-1),{scrollHeight:s,start:r,end:d=Math.min(d+1,M.length-1),offset:o}},[oe,Q,y,M,Te,h]),de=Pe.scrollHeight,ye=Pe.start,we=Pe.end,$e=Pe.offset;Ee.current.start=ye,Ee.current.end=we;var kt=e.useState({width:0,height:h}),et=Y(kt,2),ae=et[0],Dt=et[1],tt=e.useRef(),nt=e.useRef(),Nt=e.useMemo(function(){return xt(ae.width,f)},[ae.width,f]),Yt=e.useMemo(function(){return xt(ae.height,de)},[ae.height,de]),Be=de-h,Ke=e.useRef(Be);Ke.current=Be;var rt=y<=0,ot=y>=Be,ut=L<=0,it=L>=f,Ct=Tt(rt,ot,ut,it),Ve=function(){return{x:B?-L:L,y}},We=e.useRef(Ve()),Xe=bt(function(n){if(q){var r=A(A({},Ve()),n);We.current.x===r.x&&We.current.y===r.y||(q(r),We.current=r)}});function at(n,r){var o=n;r?(Rt.flushSync(function(){le(o)}),Xe()):se(o)}var Fe=function(n){var r=n,o=f?f-ae.width:0;return r=Math.max(r,0),r=Math.min(r,o)},It=bt(function(n,r){r?(Rt.flushSync(function(){le(function(o){return Fe(o+(B?-n:n))})}),Xe()):se(function(o){return o+n})}),Pt=Qt(Q,rt,ot,ut,it,!!f,It),ct=Y(Pt,2),qe=ct[0],lt=ct[1];(function(n,r,o){var d,s=e.useRef(!1),H=e.useRef(0),g=e.useRef(0),b=e.useRef(null),z=e.useRef(null),T=function(u){if(s.current){var i=Math.ceil(u.touches[0].pageX),O=Math.ceil(u.touches[0].pageY),F=H.current-i,k=g.current-O,P=Math.abs(F)>Math.abs(k);P?H.current=i:g.current=O,o(P,P?F:k)&&u.preventDefault(),clearInterval(z.current),z.current=setInterval(function(){P?F*=Et:k*=Et;var he=Math.floor(P?F:k);(!o(P,he,!0)||Math.abs(he)<=.1)&&clearInterval(z.current)},16)}},S=function(){s.current=!1,d()},c=function(u){d(),u.touches.length!==1||s.current||(s.current=!0,H.current=Math.ceil(u.touches[0].pageX),g.current=Math.ceil(u.touches[0].pageY),b.current=u.target,b.current.addEventListener("touchmove",T,{passive:!1}),b.current.addEventListener("touchend",S,{passive:!0}))};d=function(){b.current&&(b.current.removeEventListener("touchmove",T),b.current.removeEventListener("touchend",S))},Le(function(){return n&&r.current.addEventListener("touchstart",c,{passive:!0}),function(){var u;(u=r.current)===null||u===void 0||u.removeEventListener("touchstart",c),d(),clearInterval(z.current)}},[n])})(Q,ue,function(n,r,o){return!Ct(n,r,o)&&(qe({preventDefault:function(){},deltaX:n?r:0,deltaY:n?0:r}),!0)}),Le(function(){function n(o){Q&&o.preventDefault()}var r=ue.current;return r.addEventListener("wheel",qe,{passive:!1}),r.addEventListener("DOMMouseScroll",lt,{passive:!0}),r.addEventListener("MozMousePixelScroll",n,{passive:!1}),function(){r.removeEventListener("wheel",qe),r.removeEventListener("DOMMouseScroll",lt),r.removeEventListener("MozMousePixelScroll",n)}},[Q]),Le(function(){if(f){var n=Fe(L);le(n),Xe({x:n})}},[ae.width,f]);var st=function(){var n,r;(n=tt.current)===null||n===void 0||n.delayHidden(),(r=nt.current)===null||r===void 0||r.delayHidden()},ft=function(n,r,o,d,s,H,g,b){var z=e.useRef(),T=e.useState(null),S=Y(T,2),c=S[0],u=S[1];return Le(function(){if(c&&c.times<Zt){if(!n.current)return void u(function(Kt){return A({},Kt)});H();var i=c.targetAlign,O=c.originAlign,F=c.index,k=c.offset,P=n.current.clientHeight,he=!1,Ge=i,me=null;if(P){for(var dt=i||O,ht=0,Oe=0,Je=0,mt=Math.min(r.length-1,F),Qe=0;Qe<=mt;Qe+=1){var _t=s(r[Qe]);Oe=ht;var gt=o.get(_t);ht=Je=Oe+(gt===void 0?d:gt)}for(var jt=dt==="top"?k:P-k,Ue=mt;Ue>=0;Ue-=1){var Bt=s(r[Ue]),pt=o.get(Bt);if(pt===void 0){he=!0;break}if((jt-=pt)<=0)break}switch(dt){case"top":me=Oe-k;break;case"bottom":me=Je-P+k;break;default:var Mt=n.current.scrollTop;Oe<Mt?Ge="top":Je>Mt+P&&(Ge="bottom")}me!==null&&g(me),me!==c.lastTop&&(he=!0)}he&&u(A(A({},c),{},{times:c.times+1,targetAlign:Ge,lastTop:me}))}},[c,n.current]),function(i){if(i!=null){if(ee.cancel(z.current),typeof i=="number")g(i);else if(i&&Ze(i)==="object"){var O,F=i.align;O="index"in i?i.index:r.findIndex(function(P){return s(P)===i.key});var k=i.offset;u({times:0,index:O,offset:k===void 0?0:k,originAlign:F})}}else b()}}(ue,M,re,l,J,function(){return ze(!0)},se,st);e.useImperativeHandle(a,function(){return{nativeElement:be.current,getScrollInfo:Ve,scrollTo:function(n){var r;(r=n)&&Ze(r)==="object"&&("left"in r||"top"in r)?(n.left!==void 0&&le(Fe(n.left)),ft(n.top)):ft(n)}}}),Le(function(){if(G){var n=M.slice(ye,we+1);G(n,M)}},[ye,we,M]);var Xt=function(n,r,o,d){var s=e.useMemo(function(){return[new Map,[]]},[n,o.id,d]),H=Y(s,2),g=H[0],b=H[1];return function(z){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:z,S=g.get(z),c=g.get(T);if(S===void 0||c===void 0)for(var u=n.length,i=b.length;i<u;i+=1){var O,F=n[i],k=r(F);g.set(k,i);var P=(O=o.get(k))!==null&&O!==void 0?O:d;if(b[i]=(b[i-1]||0)+P,k===z&&(S=i),k===T&&(c=i),S!==void 0&&c!==void 0)break}return{top:b[S-1]||0,bottom:b[c]}}}(M,J,re,l),Ot=W==null?void 0:W({start:ye,end:we,virtual:oe,offsetX:L,offsetY:$e,rtl:B,getSize:Xt}),At=function(n,r,o,d,s,H,g,b){var z=b.getKey;return n.slice(r,o+1).map(function(T,S){var c=g(T,r+S,{style:{width:d},offsetX:s}),u=z(T);return e.createElement(Gt,{key:u,setRef:function(i){return H(T,i)}},c)})}(M,ye,we,f,L,He,X,Ce),xe=null;h&&(xe=A(_({},N?"height":"maxHeight",h),nn),Q&&(xe.overflowY="hidden",f&&(xe.overflowX="hidden"),_e&&(xe.pointerEvents="none")));var vt={};return B&&(vt.dir="rtl"),e.createElement("div",Lt({ref:be,style:A(A({},E),{},{position:"relative"}),className:Me},vt,ne),e.createElement(Ht,{onResize:function(n){Dt({width:n.offsetWidth,height:n.offsetHeight})}},e.createElement(U,{className:"".concat(R,"-holder"),style:xe,ref:ue,onScroll:function(n){var r=n.currentTarget.scrollTop;r!==y&&se(r),V==null||V(n),Xe()},onMouseEnter:st},e.createElement(zt,{prefixCls:R,height:de,offsetX:L,offsetY:$e,scrollWidth:f,onInnerResize:ze,ref:ve,innerProps:te,rtl:B,extra:Ot},At))),oe&&de>h&&e.createElement(wt,{ref:tt,prefixCls:R,scrollOffset:y,scrollRange:de,rtl:B,onScroll:at,onStartMove:Se,onStopMove:Ye,spinSize:Yt,containerSize:ae.height,style:v==null?void 0:v.verticalScrollBar,thumbStyle:v==null?void 0:v.verticalScrollBarThumb}),oe&&f>ae.width&&e.createElement(wt,{ref:nt,prefixCls:R,scrollOffset:L,scrollRange:f,rtl:B,onScroll:at,onStartMove:Se,onStopMove:Ye,spinSize:Nt,containerSize:ae.width,horizontal:!0,style:v==null?void 0:v.horizontalScrollBar,thumbStyle:v==null?void 0:v.horizontalScrollBarThumb}))}var on=e.forwardRef(rn);on.displayName="List";export{on as L};
