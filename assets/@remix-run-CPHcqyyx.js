/**
 * @remix-run/router v1.19.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $(){return $=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},$.apply(this,arguments)}var P;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(P||(P={}));const j="popstate";function tt(t){return t===void 0&&(t={}),function(e,n,a,l){l===void 0&&(l={});let{window:r=document.defaultView,v5Compat:f=!1}=l,o=r.history,i=P.Pop,h=null,c=s();c==null&&(c=0,o.replaceState($({},o.state,{idx:c}),""));function s(){return(o.state||{idx:null}).idx}function u(){i=P.Pop;let p=s(),d=p==null?null:p-c;c=p,h&&h({action:i,location:y.location,delta:d})}function v(p,d){i=P.Push;let m=O(y.location,p,d);c=s()+1;let b=A(m,c),S=y.createHref(m);try{o.pushState(b,"",S)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;r.location.assign(S)}f&&h&&h({action:i,location:y.location,delta:1})}function g(p,d){i=P.Replace;let m=O(y.location,p,d);c=s();let b=A(m,c),S=y.createHref(m);o.replaceState(b,"",S),f&&h&&h({action:i,location:y.location,delta:0})}function w(p){let d=r.location.origin!=="null"?r.location.origin:r.location.href,m=typeof p=="string"?p:B(p);return m=m.replace(/ $/,"%20"),x(d,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,d)}let y={get action(){return i},get location(){return e(r,o)},listen(p){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(j,u),h=p,()=>{r.removeEventListener(j,u),h=null}},createHref:p=>n(r,p),createURL:w,encodeLocation(p){let d=w(p);return{pathname:d.pathname,search:d.search,hash:d.hash}},push:v,replace:g,go:p=>o.go(p)};return y}(function(e,n){let{pathname:a,search:l,hash:r}=e.location;return O("",{pathname:a,search:l,hash:r},n.state&&n.state.usr||null,n.state&&n.state.key||"default")},function(e,n){return typeof n=="string"?n:B(n)},0,t)}function x(t,e){if(t===!1||t==null)throw new Error(e)}function M(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function A(t,e){return{usr:t.state,key:t.key,idx:e}}function O(t,e,n,a){return n===void 0&&(n=null),$({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?E(e):e,{state:n,key:e&&e.key||a||Math.random().toString(36).substr(2,8)})}function B(t){let{pathname:e="/",search:n="",hash:a=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function E(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let a=t.indexOf("?");a>=0&&(e.search=t.substr(a),t=t.substr(0,a)),t&&(e.pathname=t)}return e}var C;function et(t,e,n){return n===void 0&&(n="/"),function(a,l,r,f){let o=typeof l=="string"?E(l):l,i=Q(o.pathname||"/",r);if(i==null)return null;let h=I(a);(function(s){s.sort((u,v)=>u.score!==v.score?v.score-u.score:function(g,w){return g.length===w.length&&g.slice(0,-1).every((p,d)=>p===w[d])?g[g.length-1]-w[w.length-1]:0}(u.routesMeta.map(g=>g.childrenIndex),v.routesMeta.map(g=>g.childrenIndex)))})(h);let c=null;for(let s=0;c==null&&s<h.length;++s){let u=K(i);c=G(h[s],u,f)}return c}(t,e,n,!1)}function I(t,e,n,a){e===void 0&&(e=[]),n===void 0&&(n=[]),a===void 0&&(a="");let l=(r,f,o)=>{let i={relativePath:o===void 0?r.path||"":o,caseSensitive:r.caseSensitive===!0,childrenIndex:f,route:r};i.relativePath.startsWith("/")&&(x(i.relativePath.startsWith(a),'Absolute route path "'+i.relativePath+'" nested under path "'+a+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(a.length));let h=W([a,i.relativePath]),c=n.concat(i);r.children&&r.children.length>0&&(x(r.index!==!0,'Index routes must not have child routes. Please remove all child routes from route path "'+h+'".'),I(r.children,e,c,h)),(r.path!=null||r.index)&&e.push({path:h,score:z(h,r.index),routesMeta:c})};return t.forEach((r,f)=>{var o;if(r.path!==""&&(o=r.path)!=null&&o.includes("?"))for(let i of N(r.path))l(r,f,i);else l(r,f)}),e}function N(t){let e=t.split("/");if(e.length===0)return[];let[n,...a]=e,l=n.endsWith("?"),r=n.replace(/\?$/,"");if(a.length===0)return l?[r,""]:[r];let f=N(a.join("/")),o=[];return o.push(...f.map(i=>i===""?r:[r,i].join("/"))),l&&o.push(...f),o.map(i=>t.startsWith("/")&&i===""?"/":i)}(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(C||(C={}));const T=/^:[\w-]+$/,D=3,F=2,J=1,V=10,q=-2,U=t=>t==="*";function z(t,e){let n=t.split("/"),a=n.length;return n.some(U)&&(a+=q),e&&(a+=F),n.filter(l=>!U(l)).reduce((l,r)=>l+(T.test(r)?D:r===""?J:V),a)}function G(t,e,n){let{routesMeta:a}=t,l={},r="/",f=[];for(let o=0;o<a.length;++o){let i=a[o],h=o===a.length-1,c=r==="/"?e:e.slice(r.length)||"/",s=k({path:i.relativePath,caseSensitive:i.caseSensitive,end:h},c),u=i.route;if(!s&&h&&n&&!a[a.length-1].route.index&&(s=k({path:i.relativePath,caseSensitive:i.caseSensitive,end:!1},c)),!s)return null;Object.assign(l,s.params),f.push({params:l,pathname:W([r,s.pathname]),pathnameBase:X(W([r,s.pathnameBase])),route:u}),s.pathnameBase!=="/"&&(r=W([r,s.pathnameBase]))}return f}function k(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,a]=function(i,h,c){h===void 0&&(h=!1),c===void 0&&(c=!0),M(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were "'+i.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+i.replace(/\*$/,"/*")+'".');let s=[],u="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,w,y)=>(s.push({paramName:w,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),u+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?u+="\\/*$":i!==""&&i!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,h?void 0:"i"),s]}(t.path,t.caseSensitive,t.end),l=e.match(n);if(!l)return null;let r=l[0],f=r.replace(/(.)\/+$/,"$1"),o=l.slice(1);return{params:a.reduce((i,h,c)=>{let{paramName:s,isOptional:u}=h;if(s==="*"){let g=o[c]||"";f=r.slice(0,r.length-g.length).replace(/(.)\/+$/,"$1")}const v=o[c];return i[s]=u&&!v?void 0:(v||"").replace(/%2F/g,"/"),i},{}),pathname:r,pathnameBase:f,pattern:t}}function K(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return M(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function Q(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=t.charAt(n);return a&&a!=="/"?null:t.slice(n)||"/"}function R(t,e,n,a){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(a)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function nt(t,e){let n=function(a){return a.filter((l,r)=>r===0||l.route.path&&l.route.path.length>0)}(t);return e?n.map((a,l)=>l===n.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function at(t,e,n,a){let l;a===void 0&&(a=!1),typeof t=="string"?l=E(t):(l=$({},t),x(!l.pathname||!l.pathname.includes("?"),R("?","pathname","search",l)),x(!l.pathname||!l.pathname.includes("#"),R("#","pathname","hash",l)),x(!l.search||!l.search.includes("#"),R("#","search","hash",l)));let r,f=t===""||l.pathname==="",o=f?"/":l.pathname;if(o==null)r=n;else{let s=e.length-1;if(!a&&o.startsWith("..")){let u=o.split("/");for(;u[0]==="..";)u.shift(),s-=1;l.pathname=u.join("/")}r=s>=0?e[s]:"/"}let i=function(s,u){u===void 0&&(u="/");let{pathname:v,search:g="",hash:w=""}=typeof s=="string"?E(s):s;return{pathname:v?v.startsWith("/")?v:function(p,d){let m=d.replace(/\/+$/,"").split("/");return p.split("/").forEach(b=>{b===".."?m.length>1&&m.pop():b!=="."&&m.push(b)}),m.length>1?m.join("/"):"/"}(v,u):u,search:Y(g),hash:Z(w)}}(l,r),h=o&&o!=="/"&&o.endsWith("/"),c=(f||o===".")&&n.endsWith("/");return i.pathname.endsWith("/")||!h&&!c||(i.pathname+="/"),i}const W=t=>t.join("/").replace(/\/\/+/g,"/"),X=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Y=t=>t&&t!=="?"?t.startsWith("?")?t:"?"+t:"",Z=t=>t&&t!=="#"?t.startsWith("#")?t:"#"+t:"";function rt(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const H=["post","put","patch","delete"];new Set(H);const _=["get",...H];new Set(_);export{P as A,rt as a,B as b,tt as c,nt as g,x as i,W as j,et as m,E as p,at as r,Q as s};
