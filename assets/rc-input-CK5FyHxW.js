import{c as x}from"./classnames-BaEkKJlL.js";import{a as c,r as d}from"./react-Bi3d65_o.js";import{d as fe,b as y,g as ce,e as F,k as de,c as ue,f as Ee}from"./@babel-D4-ut-Uz.js";import{B as we,y as Ce}from"./rc-util-C7705Oj_.js";function se(e,t,l){var o=t.cloneNode(!0),f=Object.create(e,{target:{value:o},currentTarget:{value:o}});return o.value=l,typeof t.selectionStart=="number"&&typeof t.selectionEnd=="number"&&(o.selectionStart=t.selectionStart,o.selectionEnd=t.selectionEnd),o.setSelectionRange=function(){t.setSelectionRange.apply(t,arguments)},f}function ie(e,t,l,o){if(l){var f=t;t.type!=="click"?e.type==="file"||o===void 0?l(f):l(f=se(t,e,o)):l(f=se(t,e,""))}}function Ne(e,t){if(e){e.focus(t);var l=(t||{}).cursor;if(l){var o=e.value.length;switch(l){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(o,o);break;default:e.setSelectionRange(0,o)}}}}var be=c.forwardRef(function(e,t){var l,o,f=e.inputElement,C=e.children,p=e.prefixCls,D=e.prefix,b=e.suffix,z=e.addonBefore,h=e.addonAfter,k=e.className,ne=e.style,B=e.disabled,X=e.readOnly,j=e.focused,_=e.triggerFocus,E=e.allowClear,W=e.value,Z=e.handleReset,te=e.hidden,m=e.classes,r=e.classNames,L=e.dataAttrs,w=e.styles,g=e.components,$=e.onClear,P=C??f,oe=(g==null?void 0:g.affixWrapper)||"span",U=(g==null?void 0:g.groupWrapper)||"span",H=(g==null?void 0:g.wrapper)||"span",I=(g==null?void 0:g.groupAddon)||"span",a=d.useRef(null),q=function(i){return!!(i.prefix||i.suffix||i.allowClear)}(e),v=d.cloneElement(P,{value:W,className:x(P.props.className,!q&&(r==null?void 0:r.variant))||null}),Y=d.useRef(null);if(c.useImperativeHandle(t,function(){return{nativeElement:Y.current||a.current}}),q){var M=null;if(E){var J=!B&&!X&&W,K="".concat(p,"-clear-icon"),O=fe(E)==="object"&&E!=null&&E.clearIcon?E.clearIcon:"âœ–";M=c.createElement("span",{onClick:function(i){Z==null||Z(i),$==null||$()},onMouseDown:function(i){return i.preventDefault()},className:x(K,y(y({},"".concat(K,"-hidden"),!J),"".concat(K,"-has-suffix"),!!b)),role:"button",tabIndex:-1},O)}var S="".concat(p,"-affix-wrapper"),ee=x(S,y(y(y(y(y({},"".concat(p,"-disabled"),B),"".concat(S,"-disabled"),B),"".concat(S,"-focused"),j),"".concat(S,"-readonly"),X),"".concat(S,"-input-with-clear-btn"),b&&E&&W),m==null?void 0:m.affixWrapper,r==null?void 0:r.affixWrapper,r==null?void 0:r.variant),V=(b||E)&&c.createElement("span",{className:x("".concat(p,"-suffix"),r==null?void 0:r.suffix),style:w==null?void 0:w.suffix},M,b);v=c.createElement(oe,ce({className:ee,style:w==null?void 0:w.affixWrapper,onClick:function(i){var A;(A=a.current)!==null&&A!==void 0&&A.contains(i.target)&&(_==null||_())}},L==null?void 0:L.affixWrapper,{ref:a}),D&&c.createElement("span",{className:x("".concat(p,"-prefix"),r==null?void 0:r.prefix),style:w==null?void 0:w.prefix},D),v,V)}if(function(i){return!(!i.addonBefore&&!i.addonAfter)}(e)){var T="".concat(p,"-group"),s="".concat(T,"-addon"),N="".concat(T,"-wrapper"),G=x("".concat(p,"-wrapper"),T,m==null?void 0:m.wrapper,r==null?void 0:r.wrapper),re=x(N,y({},"".concat(N,"-disabled"),B),m==null?void 0:m.group,r==null?void 0:r.groupWrapper);v=c.createElement(U,{className:re,ref:Y},c.createElement(H,{className:G},z&&c.createElement(I,{className:s},z),v,h&&c.createElement(I,{className:s},h)))}return c.cloneElement(v,{className:x((l=v.props)===null||l===void 0?void 0:l.className,k)||null,style:F(F({},(o=v.props)===null||o===void 0?void 0:o.style),ne),hidden:te})}),Se=["show"];function Re(e,t){return d.useMemo(function(){var l={};t&&(l.show=fe(t)==="object"&&t.formatter?t.formatter:!!t);var o=l=F(F({},l),e),f=o.show,C=de(o,Se);return F(F({},C),{},{show:!!f,showFormatter:typeof f=="function"?f:void 0,strategy:C.strategy||function(p){return p.length}})},[e,t])}var Fe=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],Ke=d.forwardRef(function(e,t){var l=e.autoComplete,o=e.onChange,f=e.onFocus,C=e.onBlur,p=e.onPressEnter,D=e.onKeyDown,b=e.onKeyUp,z=e.prefixCls,h=z===void 0?"rc-input":z,k=e.disabled,ne=e.htmlSize,B=e.className,X=e.maxLength,j=e.suffix,_=e.showCount,E=e.count,W=e.type,Z=W===void 0?"text":W,te=e.classes,m=e.classNames,r=e.styles,L=e.onCompositionStart,w=e.onCompositionEnd,g=de(e,Fe),$=d.useState(!1),P=ue($,2),oe=P[0],U=P[1],H=d.useRef(!1),I=d.useRef(!1),a=d.useRef(null),q=d.useRef(null),v=function(n){a.current&&Ne(a.current,n)},Y=we(e.defaultValue,{value:e.value}),M=ue(Y,2),J=M[0],K=M[1],O=J==null?"":String(J),S=d.useState(null),ee=ue(S,2),V=ee[0],T=ee[1],s=Re(E,_),N=s.max||X,G=s.strategy(O),re=!!N&&G>N;d.useImperativeHandle(t,function(){var n;return{focus:v,blur:function(){var u;(u=a.current)===null||u===void 0||u.blur()},setSelectionRange:function(u,le,Q){var R;(R=a.current)===null||R===void 0||R.setSelectionRange(u,le,Q)},select:function(){var u;(u=a.current)===null||u===void 0||u.select()},input:a.current,nativeElement:((n=q.current)===null||n===void 0?void 0:n.nativeElement)||a.current}}),d.useEffect(function(){U(function(n){return(!n||!k)&&n})},[k]);var i=function(n,u,le){var Q,R,ae=u;if(!H.current&&s.exceedFormatter&&s.max&&s.strategy(u)>s.max)u!==(ae=s.exceedFormatter(u,{max:s.max}))&&T([((Q=a.current)===null||Q===void 0?void 0:Q.selectionStart)||0,((R=a.current)===null||R===void 0?void 0:R.selectionEnd)||0]);else if(le.source==="compositionEnd")return;K(ae),a.current&&ie(a.current,n,o,ae)};d.useEffect(function(){var n;V&&((n=a.current)===null||n===void 0||n.setSelectionRange.apply(n,Ee(V)))},[V]);var A,pe=function(n){i(n,n.target.value,{source:"change"})},me=function(n){H.current=!1,i(n,n.currentTarget.value,{source:"compositionEnd"}),w==null||w(n)},ve=function(n){p&&n.key==="Enter"&&!I.current&&(I.current=!0,p(n)),D==null||D(n)},xe=function(n){n.key==="Enter"&&(I.current=!1),b==null||b(n)},ge=function(n){U(!0),f==null||f(n)},ye=function(n){U(!1),C==null||C(n)},he=re&&"".concat(h,"-out-of-range");return c.createElement(be,ce({},g,{prefixCls:h,className:x(B,he),handleReset:function(n){K(""),v(),a.current&&ie(a.current,n,o)},value:O,focused:oe,triggerFocus:v,suffix:function(){var n=Number(N)>0;if(j||s.show){var u=s.showFormatter?s.showFormatter({value:O,count:G,maxLength:N}):"".concat(G).concat(n?" / ".concat(N):"");return c.createElement(c.Fragment,null,s.show&&c.createElement("span",{className:x("".concat(h,"-show-count-suffix"),y({},"".concat(h,"-show-count-has-suffix"),!!j),m==null?void 0:m.count),style:F({},r==null?void 0:r.count)},u),j)}return null}(),disabled:k,classes:te,classNames:m,styles:r}),(A=Ce(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]),c.createElement("input",ce({autoComplete:l},A,{onChange:pe,onFocus:ge,onBlur:ye,onKeyDown:ve,onKeyUp:xe,className:x(h,y({},"".concat(h,"-disabled"),k),m==null?void 0:m.input),style:r==null?void 0:r.input,ref:a,size:ne,type:Z,onCompositionStart:function(n){H.current=!0,L==null||L(n)},onCompositionEnd:me}))))});export{be as B,Ke as I,ie as r,Ne as t,Re as u};
