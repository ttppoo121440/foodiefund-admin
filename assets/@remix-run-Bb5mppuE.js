/**
 * @remix-run/router v1.19.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function S(){return S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},S.apply(this,arguments)}var P;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(P||(P={}));const j="popstate";function tt(t){return t===void 0&&(t={}),function(e,a,n,l){l===void 0&&(l={});let{window:r=document.defaultView,v5Compat:f=!1}=l,o=r.history,i=P.Pop,h=null,c=s();c==null&&(c=0,o.replaceState(S({},o.state,{idx:c}),""));function s(){return(o.state||{idx:null}).idx}function u(){i=P.Pop;let p=s(),m=p==null?null:p-c;c=p,h&&h({action:i,location:y.location,delta:m})}function v(p,m){i=P.Push;let d=L(y.location,p,m);n&&n(d,p),c=s()+1;let b=B(d,c),$=y.createHref(d);try{o.pushState(b,"",$)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;r.location.assign($)}f&&h&&h({action:i,location:y.location,delta:1})}function g(p,m){i=P.Replace;let d=L(y.location,p,m);n&&n(d,p),c=s();let b=B(d,c),$=y.createHref(d);o.replaceState(b,"",$),f&&h&&h({action:i,location:y.location,delta:0})}function w(p){let m=r.location.origin!=="null"?r.location.origin:r.location.href,d=typeof p=="string"?p:C(p);return d=d.replace(/ $/,"%20"),x(m,"No window.location.(origin|href) available to create URL for href: "+d),new URL(d,m)}let y={get action(){return i},get location(){return e(r,o)},listen(p){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(j,u),h=p,()=>{r.removeEventListener(j,u),h=null}},createHref:p=>a(r,p),createURL:w,encodeLocation(p){let m=w(p);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:v,replace:g,go:p=>o.go(p)};return y}(function(e,a){let{pathname:n="/",search:l="",hash:r=""}=W(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),L("",{pathname:n,search:l,hash:r},a.state&&a.state.usr||null,a.state&&a.state.key||"default")},function(e,a){let n=e.document.querySelector("base"),l="";if(n&&n.getAttribute("href")){let r=e.location.href,f=r.indexOf("#");l=f===-1?r:r.slice(0,f)}return l+"#"+(typeof a=="string"?a:C(a))},function(e,a){R(e.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")},t)}function x(t,e){if(t===!1||t==null)throw new Error(e)}function R(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function B(t,e){return{usr:t.state,key:t.key,idx:e}}function L(t,e,a,n){return a===void 0&&(a=null),S({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?W(e):e,{state:a,key:e&&e.key||n||Math.random().toString(36).substr(2,8)})}function C(t){let{pathname:e="/",search:a="",hash:n=""}=t;return a&&a!=="?"&&(e+=a.charAt(0)==="?"?a:"?"+a),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function W(t){let e={};if(t){let a=t.indexOf("#");a>=0&&(e.hash=t.substr(a),t=t.substr(0,a));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}var U;function et(t,e,a){return a===void 0&&(a="/"),function(n,l,r,f){let o=typeof l=="string"?W(l):l,i=Q(o.pathname||"/",r);if(i==null)return null;let h=N(n);(function(s){s.sort((u,v)=>u.score!==v.score?v.score-u.score:function(g,w){return g.length===w.length&&g.slice(0,-1).every((p,m)=>p===w[m])?g[g.length-1]-w[w.length-1]:0}(u.routesMeta.map(g=>g.childrenIndex),v.routesMeta.map(g=>g.childrenIndex)))})(h);let c=null;for(let s=0;c==null&&s<h.length;++s){let u=K(i);c=G(h[s],u,f)}return c}(t,e,a,!1)}function N(t,e,a,n){e===void 0&&(e=[]),a===void 0&&(a=[]),n===void 0&&(n="");let l=(r,f,o)=>{let i={relativePath:o===void 0?r.path||"":o,caseSensitive:r.caseSensitive===!0,childrenIndex:f,route:r};i.relativePath.startsWith("/")&&(x(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(n.length));let h=O([n,i.relativePath]),c=a.concat(i);r.children&&r.children.length>0&&(x(r.index!==!0,'Index routes must not have child routes. Please remove all child routes from route path "'+h+'".'),N(r.children,e,c,h)),(r.path!=null||r.index)&&e.push({path:h,score:z(h,r.index),routesMeta:c})};return t.forEach((r,f)=>{var o;if(r.path!==""&&(o=r.path)!=null&&o.includes("?"))for(let i of I(r.path))l(r,f,i);else l(r,f)}),e}function I(t){let e=t.split("/");if(e.length===0)return[];let[a,...n]=e,l=a.endsWith("?"),r=a.replace(/\?$/,"");if(n.length===0)return l?[r,""]:[r];let f=I(n.join("/")),o=[];return o.push(...f.map(i=>i===""?r:[r,i].join("/"))),l&&o.push(...f),o.map(i=>t.startsWith("/")&&i===""?"/":i)}(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(U||(U={}));const T=/^:[\w-]+$/,D=3,F=2,J=1,q=10,V=-2,k=t=>t==="*";function z(t,e){let a=t.split("/"),n=a.length;return a.some(k)&&(n+=V),e&&(n+=F),a.filter(l=>!k(l)).reduce((l,r)=>l+(T.test(r)?D:r===""?J:q),n)}function G(t,e,a){let{routesMeta:n}=t,l={},r="/",f=[];for(let o=0;o<n.length;++o){let i=n[o],h=o===n.length-1,c=r==="/"?e:e.slice(r.length)||"/",s=M({path:i.relativePath,caseSensitive:i.caseSensitive,end:h},c),u=i.route;if(!s&&h&&a&&!n[n.length-1].route.index&&(s=M({path:i.relativePath,caseSensitive:i.caseSensitive,end:!1},c)),!s)return null;Object.assign(l,s.params),f.push({params:l,pathname:O([r,s.pathname]),pathnameBase:X(O([r,s.pathnameBase])),route:u}),s.pathnameBase!=="/"&&(r=O([r,s.pathnameBase]))}return f}function M(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,n]=function(i,h,c){h===void 0&&(h=!1),c===void 0&&(c=!0),R(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were "'+i.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+i.replace(/\*$/,"/*")+'".');let s=[],u="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,w,y)=>(s.push({paramName:w,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),u+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?u+="\\/*$":i!==""&&i!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,h?void 0:"i"),s]}(t.path,t.caseSensitive,t.end),l=e.match(a);if(!l)return null;let r=l[0],f=r.replace(/(.)\/+$/,"$1"),o=l.slice(1);return{params:n.reduce((i,h,c)=>{let{paramName:s,isOptional:u}=h;if(s==="*"){let g=o[c]||"";f=r.slice(0,r.length-g.length).replace(/(.)\/+$/,"$1")}const v=o[c];return i[s]=u&&!v?void 0:(v||"").replace(/%2F/g,"/"),i},{}),pathname:r,pathnameBase:f,pattern:t}}function K(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return R(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function Q(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let a=e.endsWith("/")?e.length-1:e.length,n=t.charAt(a);return n&&n!=="/"?null:t.slice(a)||"/"}function A(t,e,a,n){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+a+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function nt(t,e){let a=function(n){return n.filter((l,r)=>r===0||l.route.path&&l.route.path.length>0)}(t);return e?a.map((n,l)=>l===a.length-1?n.pathname:n.pathnameBase):a.map(n=>n.pathnameBase)}function at(t,e,a,n){let l;n===void 0&&(n=!1),typeof t=="string"?l=W(t):(l=S({},t),x(!l.pathname||!l.pathname.includes("?"),A("?","pathname","search",l)),x(!l.pathname||!l.pathname.includes("#"),A("#","pathname","hash",l)),x(!l.search||!l.search.includes("#"),A("#","search","hash",l)));let r,f=t===""||l.pathname==="",o=f?"/":l.pathname;if(o==null)r=a;else{let s=e.length-1;if(!n&&o.startsWith("..")){let u=o.split("/");for(;u[0]==="..";)u.shift(),s-=1;l.pathname=u.join("/")}r=s>=0?e[s]:"/"}let i=function(s,u){u===void 0&&(u="/");let{pathname:v,search:g="",hash:w=""}=typeof s=="string"?W(s):s;return{pathname:v?v.startsWith("/")?v:function(p,m){let d=m.replace(/\/+$/,"").split("/");return p.split("/").forEach(b=>{b===".."?d.length>1&&d.pop():b!=="."&&d.push(b)}),d.length>1?d.join("/"):"/"}(v,u):u,search:Y(g),hash:Z(w)}}(l,r),h=o&&o!=="/"&&o.endsWith("/"),c=(f||o===".")&&a.endsWith("/");return i.pathname.endsWith("/")||!h&&!c||(i.pathname+="/"),i}const O=t=>t.join("/").replace(/\/\/+/g,"/"),X=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Y=t=>t&&t!=="?"?t.startsWith("?")?t:"?"+t:"",Z=t=>t&&t!=="#"?t.startsWith("#")?t:"#"+t:"";function rt(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const H=["post","put","patch","delete"];new Set(H);const _=["get",...H];new Set(_);export{P as A,rt as a,C as b,tt as c,nt as g,x as i,O as j,et as m,W as p,at as r,Q as s};
