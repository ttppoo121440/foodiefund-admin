import{r as n,a as hn}from"./react-Bi3d65_o.js";import{K as h,w as lt,f as ct,A as fn,b as st,l as dt,e as pt,u as ft,B as yn,o as vt,y as mt,c as gt,x as ht}from"./rc-util-C7705Oj_.js";import{c as Ye}from"./classnames-BaEkKJlL.js";import{F as bt}from"./rc-overflow-bPcnyqg5.js";import"./react-dom-DttoD7qq.js";import"./rc-resize-observer-B6_Tj1-Q.js";import"./rc-motion-C1KiqwsE.js";import{d as mn,c as se,e as ee,b as ce,g as Ge,k as tn,o as wt,f as Ve}from"./@babel-D4-ut-Uz.js";import{T as yt}from"./@rc-component-DkdjcAXV.js";import{L as Ct}from"./rc-virtual-list-MHoChsUk.js";var vn=function(e){var c=e.className,o=e.customizeIcon,l=e.customizeIconProps,p=e.children,E=e.onMouseDown,S=e.onClick,B=typeof o=="function"?o(l):o;return n.createElement("span",{className:c,onMouseDown:function(H){H.preventDefault(),E==null||E(H)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:S,"aria-hidden":!0},B!==void 0?B:n.createElement("span",{className:Ye(c.split(/\s+/).map(function(H){return"".concat(H,"-icon")}))},p))},Hn=n.createContext(null);function jn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,c=n.useRef(null),o=n.useRef(null);return n.useEffect(function(){return function(){window.clearTimeout(o.current)}},[]),[function(){return c.current},function(l){(l||c.current===null)&&(c.current=l),window.clearTimeout(o.current),o.current=window.setTimeout(function(){c.current=null},e)}]}var Et=function(e,c){var o,l=e.prefixCls,p=e.id,E=e.inputElement,S=e.disabled,B=e.tabIndex,H=e.autoFocus,ne=e.autoComplete,R=e.editable,G=e.activeDescendantId,b=e.value,K=e.maxLength,P=e.onKeyDown,$=e.onMouseDown,D=e.onChange,V=e.onPaste,X=e.onCompositionStart,O=e.onCompositionEnd,N=e.open,te=e.attrs,Y=E||n.createElement("input",null),Q=Y,y=Q.ref,x=Q.props,M=x.onKeyDown,A=x.onChange,pe=x.onMouseDown,T=x.onCompositionStart,fe=x.onCompositionEnd,L=x.style;return lt(!("maxLength"in Y.props)),Y=n.cloneElement(Y,ee(ee(ee({type:"search"},x),{},{id:p,ref:ct(c,y),disabled:S,tabIndex:B,autoComplete:ne||"off",autoFocus:H,className:Ye("".concat(l,"-selection-search-input"),(o=Y)===null||o===void 0||(o=o.props)===null||o===void 0?void 0:o.className),role:"combobox","aria-expanded":N||!1,"aria-haspopup":"listbox","aria-owns":"".concat(p,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(p,"_list"),"aria-activedescendant":N?G:void 0},te),{},{value:R?b:"",maxLength:K,readOnly:!R,unselectable:R?null:"on",style:ee(ee({},L),{},{opacity:R?null:0}),onKeyDown:function(w){P(w),M&&M(w)},onMouseDown:function(w){$(w),pe&&pe(w)},onChange:function(w){D(w),A&&A(w)},onCompositionStart:function(w){X(w),T&&T(w)},onCompositionEnd:function(w){O(w),fe&&fe(w)},onPaste:V}))},Un=n.forwardRef(Et);function Bn(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}var St=typeof window<"u"&&window.document&&window.document.documentElement;function kn(e){return["string","number"].includes(mn(e))}function Gn(e){var c=void 0;return e&&(kn(e.title)?c=e.title.toString():kn(e.label)&&(c=e.label.toString())),c}function xt(e){var c;return(c=e.key)!==null&&c!==void 0?c:e.value}var An=function(e){e.preventDefault(),e.stopPropagation()},It=function(e){var c,o,l=e.id,p=e.prefixCls,E=e.values,S=e.open,B=e.searchValue,H=e.autoClearSearchValue,ne=e.inputRef,R=e.placeholder,G=e.disabled,b=e.mode,K=e.showSearch,P=e.autoFocus,$=e.autoComplete,D=e.activeDescendantId,V=e.tabIndex,X=e.removeIcon,O=e.maxTagCount,N=e.maxTagTextLength,te=e.maxTagPlaceholder,Y=te===void 0?function(f){return"+ ".concat(f.length," ...")}:te,Q=e.tagRender,y=e.onToggleOpen,x=e.onRemove,M=e.onInputChange,A=e.onInputPaste,pe=e.onInputKeyDown,T=e.onInputMouseDown,fe=e.onInputCompositionStart,L=e.onInputCompositionEnd,w=n.useRef(null),Me=n.useState(0),Oe=se(Me,2),be=Oe[0],Fe=Oe[1],Te=n.useState(!1),We=se(Te,2),Ke=We[0],De=We[1],ie="".concat(p,"-selection"),ke=S||b==="multiple"&&H===!1||b==="tags"?B:"",oe=b==="tags"||b==="multiple"&&H===!1||K&&(S||Ke);c=function(){Fe(w.current.scrollWidth)},o=[ke],St?n.useLayoutEffect(c,o):n.useEffect(c,o);var ze=function(f,m,_,F,ve){return n.createElement("span",{title:Gn(f),className:Ye("".concat(ie,"-item"),ce({},"".concat(ie,"-item-disabled"),_))},n.createElement("span",{className:"".concat(ie,"-item-content")},m),F&&n.createElement(vn,{className:"".concat(ie,"-item-remove"),onMouseDown:An,onClick:ve,customizeIcon:X},"×"))},i=function(f,m,_,F,ve,Ce){return n.createElement("span",{onMouseDown:function(me){An(me),y(!S)}},Q({label:m,value:f,disabled:_,closable:F,onClose:ve,isMaxTag:!!Ce}))},s=n.createElement("div",{className:"".concat(ie,"-search"),style:{width:be},onFocus:function(){De(!0)},onBlur:function(){De(!1)}},n.createElement(Un,{ref:ne,open:S,prefixCls:p,id:l,inputElement:null,disabled:G,autoFocus:P,autoComplete:$,editable:oe,activeDescendantId:D,value:ke,onKeyDown:pe,onMouseDown:T,onChange:M,onPaste:A,onCompositionStart:fe,onCompositionEnd:L,tabIndex:V,attrs:fn(e,!0)}),n.createElement("span",{ref:w,className:"".concat(ie,"-search-mirror"),"aria-hidden":!0},ke," ")),j=n.createElement(bt,{prefixCls:"".concat(ie,"-overflow"),data:E,renderItem:function(f){var m=f.disabled,_=f.label,F=f.value,ve=!G&&!m,Ce=_;if(typeof N=="number"&&(typeof _=="string"||typeof _=="number")){var me=String(Ce);me.length>N&&(Ce="".concat(me.slice(0,N),"..."))}var Ee=function(Ae){Ae&&Ae.stopPropagation(),x(f)};return typeof Q=="function"?i(F,Ce,m,ve,Ee):ze(f,Ce,m,ve,Ee)},renderRest:function(f){var m=typeof Y=="function"?Y(f):Y;return typeof Q=="function"?i(void 0,m,!1,!1,void 0,!0):ze({title:m},m,!1)},suffix:s,itemKey:xt,maxCount:O});return n.createElement(n.Fragment,null,j,!E.length&&!ke&&n.createElement("span",{className:"".concat(ie,"-placeholder")},R))},Dt=function(e){var c=e.inputElement,o=e.prefixCls,l=e.id,p=e.inputRef,E=e.disabled,S=e.autoFocus,B=e.autoComplete,H=e.activeDescendantId,ne=e.mode,R=e.open,G=e.values,b=e.placeholder,K=e.tabIndex,P=e.showSearch,$=e.searchValue,D=e.activeValue,V=e.maxLength,X=e.onInputKeyDown,O=e.onInputMouseDown,N=e.onInputChange,te=e.onInputPaste,Y=e.onInputCompositionStart,Q=e.onInputCompositionEnd,y=e.title,x=n.useState(!1),M=se(x,2),A=M[0],pe=M[1],T=ne==="combobox",fe=T||P,L=G[0],w=$||"";T&&D&&!A&&(w=D),n.useEffect(function(){T&&pe(!1)},[T,D]);var Me=!(ne!=="combobox"&&!R&&!P)&&!!w,Oe=y===void 0?Gn(L):y,be=n.useMemo(function(){return L?null:n.createElement("span",{className:"".concat(o,"-selection-placeholder"),style:Me?{visibility:"hidden"}:void 0},b)},[L,Me,b,o]);return n.createElement(n.Fragment,null,n.createElement("span",{className:"".concat(o,"-selection-search")},n.createElement(Un,{ref:p,prefixCls:o,id:l,open:R,inputElement:c,disabled:E,autoFocus:S,autoComplete:B,editable:fe,activeDescendantId:H,value:w,onKeyDown:X,onMouseDown:O,onChange:function(Fe){pe(!0),N(Fe)},onPaste:te,onCompositionStart:Y,onCompositionEnd:Q,tabIndex:K,attrs:fn(e,!0),maxLength:T?V:void 0})),!T&&L?n.createElement("span",{className:"".concat(o,"-selection-item"),title:Oe,style:Me?{visibility:"hidden"}:void 0},L.label):null,be)},Rt=function(e,c){var o=n.useRef(null),l=n.useRef(!1),p=e.prefixCls,E=e.open,S=e.mode,B=e.showSearch,H=e.tokenWithEnter,ne=e.disabled,R=e.autoClearSearchValue,G=e.onSearch,b=e.onSearchSubmit,K=e.onToggleOpen,P=e.onInputKeyDown,$=e.domRef;n.useImperativeHandle(c,function(){return{focus:function(y){o.current.focus(y)},blur:function(){o.current.blur()}}});var D=jn(0),V=se(D,2),X=V[0],O=V[1],N=n.useRef(null),te=function(y){G(y,!0,l.current)!==!1&&K(!0)},Y={inputRef:o,onInputKeyDown:function(y){var x,M=y.which;M!==h.UP&&M!==h.DOWN||y.preventDefault(),P&&P(y),M!==h.ENTER||S!=="tags"||l.current||E||b==null||b(y.target.value),x=M,[h.ESC,h.SHIFT,h.BACKSPACE,h.TAB,h.WIN_KEY,h.ALT,h.META,h.WIN_KEY_RIGHT,h.CTRL,h.SEMICOLON,h.EQUALS,h.CAPS_LOCK,h.CONTEXT_MENU,h.F1,h.F2,h.F3,h.F4,h.F5,h.F6,h.F7,h.F8,h.F9,h.F10,h.F11,h.F12].includes(x)||K(!0)},onInputMouseDown:function(){O(!0)},onInputChange:function(y){var x=y.target.value;if(H&&N.current&&/[\r\n]/.test(N.current)){var M=N.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");x=x.replace(M,N.current)}N.current=null,te(x)},onInputPaste:function(y){var x=y.clipboardData,M=x==null?void 0:x.getData("text");N.current=M||""},onInputCompositionStart:function(){l.current=!0},onInputCompositionEnd:function(y){l.current=!1,S!=="combobox"&&te(y.target.value)}},Q=S==="multiple"||S==="tags"?n.createElement(It,Ge({},e,Y)):n.createElement(Dt,Ge({},e,Y));return n.createElement("div",{ref:$,className:"".concat(p,"-selector"),onClick:function(y){y.target!==o.current&&(document.body.style.msTouchAction!==void 0?setTimeout(function(){o.current.focus()}):o.current.focus())},onMouseDown:function(y){var x=X();y.target===o.current||x||S==="combobox"&&ne||y.preventDefault(),(S==="combobox"||B&&x)&&E||(E&&R!==!1&&G("",!0,!1),K())}},Q)},Mt=n.forwardRef(Rt),Nt=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],Pt=function(e,c){var o=e.prefixCls;e.disabled;var l=e.visible,p=e.children,E=e.popupElement,S=e.animation,B=e.transitionName,H=e.dropdownStyle,ne=e.dropdownClassName,R=e.direction,G=R===void 0?"ltr":R,b=e.placement,K=e.builtinPlacements,P=e.dropdownMatchSelectWidth,$=e.dropdownRender,D=e.dropdownAlign,V=e.getPopupContainer,X=e.empty,O=e.getTriggerDOMNode,N=e.onPopupVisibleChange,te=e.onPopupMouseEnter,Y=tn(e,Nt),Q="".concat(o,"-dropdown"),y=E;$&&(y=$(E));var x=n.useMemo(function(){return K||function(L){var w=L===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:w,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:w,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:w,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:w,adjustY:1},htmlRegion:"scroll"}}}(P)},[K,P]),M=S?"".concat(Q,"-").concat(S):B,A=typeof P=="number",pe=n.useMemo(function(){return A?null:P===!1?"minWidth":"width"},[P,A]),T=H;A&&(T=ee(ee({},T),{},{width:P}));var fe=n.useRef(null);return n.useImperativeHandle(c,function(){return{getPopupElement:function(){var L;return(L=fe.current)===null||L===void 0?void 0:L.popupElement}}}),n.createElement(yt,Ge({},Y,{showAction:N?["click"]:[],hideAction:N?["click"]:[],popupPlacement:b||(G==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:x,prefixCls:Q,popupTransitionName:M,popup:n.createElement("div",{onMouseEnter:te},y),ref:fe,stretch:pe,popupAlign:D,popupVisible:l,getPopupContainer:V,popupClassName:Ye(ne,ce({},"".concat(Q,"-empty"),X)),popupStyle:T,getTriggerDOMNode:O,onPopupVisibleChange:N}),p)},Vt=n.forwardRef(Pt);function Fn(e,c){var o,l=e.key;return"value"in e&&(o=e.value),l??(o!==void 0?o:"rc-index-key-".concat(c))}function Cn(e){return e!==void 0&&!Number.isNaN(e)}function Kn(e,c){var o=e||{},l=o.label||(c?"children":"label");return{label:l,value:o.value||"value",options:o.options||"options",groupLabel:o.groupLabel||l}}function bn(e){var c=ee({},e);return"props"in c||Object.defineProperty(c,"props",{get:function(){return st(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),c}}),c}var Sn=n.createContext(null);function Ot(e){var c=e.visible,o=e.values;return c?n.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(o.slice(0,50).map(function(l){var p=l.label,E=l.value;return["number","string"].includes(mn(p))?p:E}).join(", ")),o.length>50?", ...":null):null}var Tt=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],kt=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],En=function(e){return e==="tags"||e==="multiple"},At=n.forwardRef(function(e,c){var o,l=e.id,p=e.prefixCls,E=e.className,S=e.showSearch,B=e.tagRender,H=e.direction,ne=e.omitDomProps,R=e.displayValues,G=e.onDisplayValuesChange,b=e.emptyOptions,K=e.notFoundContent,P=K===void 0?"Not Found":K,$=e.onClear,D=e.mode,V=e.disabled,X=e.loading,O=e.getInputElement,N=e.getRawInputElement,te=e.open,Y=e.defaultOpen,Q=e.onDropdownVisibleChange,y=e.activeValue,x=e.onActiveValueChange,M=e.activeDescendantId,A=e.searchValue,pe=e.autoClearSearchValue,T=e.onSearch,fe=e.onSearchSplit,L=e.tokenSeparators,w=e.allowClear,Me=e.suffixIcon,Oe=e.clearIcon,be=e.OptionList,Fe=e.animation,Te=e.transitionName,We=e.dropdownStyle,Ke=e.dropdownClassName,De=e.dropdownMatchSelectWidth,ie=e.dropdownRender,ke=e.dropdownAlign,oe=e.placement,ze=e.builtinPlacements,i=e.getPopupContainer,s=e.showAction,j=s===void 0?[]:s,f=e.onFocus,m=e.onBlur,_=e.onKeyUp,F=e.onKeyDown,ve=e.onMouseDown,Ce=tn(e,Tt),me=En(D),Ee=(S!==void 0?S:me)||D==="combobox",Ae=ee({},Ce);kt.forEach(function(u){delete Ae[u]}),ne==null||ne.forEach(function(u){delete Ae[u]});var on=n.useState(!1),Je=se(on,2),Ze=Je[0],ge=Je[1];n.useEffect(function(){ge(dt())},[]);var Se=n.useRef(null),Ne=n.useRef(null),ye=n.useRef(null),Pe=n.useRef(null),xe=n.useRef(null),He=n.useRef(!1),Xe=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,I=n.useState(!1),re=se(I,2),k=re[0],z=re[1],de=n.useRef(null),ae=function(){window.clearTimeout(de.current)};return n.useEffect(function(){return ae},[]),[k,function(le,ue){ae(),de.current=window.setTimeout(function(){z(le),ue&&ue()},u)},ae]}(),Le=se(Xe,3),je=Le[0],rn=Le[1],un=Le[2];n.useImperativeHandle(c,function(){var u,I;return{focus:(u=Pe.current)===null||u===void 0?void 0:u.focus,blur:(I=Pe.current)===null||I===void 0?void 0:I.blur,scrollTo:function(re){var k;return(k=xe.current)===null||k===void 0?void 0:k.scrollTo(re)},nativeElement:Se.current||Ne.current}});var _e=n.useMemo(function(){var u;if(D!=="combobox")return A;var I=(u=R[0])===null||u===void 0?void 0:u.value;return typeof I=="string"||typeof I=="number"?String(I):""},[A,D,R]),Qe=D==="combobox"&&typeof O=="function"&&O()||null,Ue=typeof N=="function"&&N(),ln=pt(Ne,Ue==null||(o=Ue.props)===null||o===void 0?void 0:o.ref),gn=n.useState(!1),cn=se(gn,2),sn=cn[0],dn=cn[1];ft(function(){dn(!0)},[]);var en=yn(!1,{defaultValue:Y,value:te}),an=se(en,2),pn=an[0],r=an[1],t=!!sn&&pn,a=!P&&b;(V||a&&t&&D==="combobox")&&(t=!1);var d=!a&&t,v=n.useCallback(function(u){var I=u!==void 0?u:!t;V||(r(I),t!==I&&(Q==null||Q(I)))},[V,t,r,Q]),W=n.useMemo(function(){return(L||[]).some(function(u){return[`
`,`\r
`].includes(u)})},[L]),q=n.useContext(Sn)||{},J=q.maxCount,U=q.rawValues,C=function(u,I,re){if(!(me&&Cn(J)&&(U==null?void 0:U.size)>=J)){var k=!0,z=u;x==null||x(null);var de=function(le,ue,Ie){if(!ue||!ue.length)return null;var $e=!1,qe=function ot(Pn,rt){var Vn=wt(rt),On=Vn[0],at=Vn.slice(1);if(!On)return[Pn];var Tn=Pn.split(On);return $e=$e||Tn.length>1,Tn.reduce(function(ut,it){return[].concat(Ve(ut),Ve(ot(it,at)))},[]).filter(Boolean)}(le,ue);return $e?Ie!==void 0?qe.slice(0,Ie):qe:null}(u,L,Cn(J)?J-U.size:void 0),ae=re?null:de;return D!=="combobox"&&ae&&(z="",fe==null||fe(ae),v(!1),k=!1),T&&_e!==z&&T(z,{source:I?"typing":"effect"}),k}};n.useEffect(function(){t||me||D==="combobox"||C("",!1,!1)},[t]),n.useEffect(function(){pn&&V&&r(!1),V&&!He.current&&rn(!1)},[V]);var Z=jn(),he=se(Z,2),we=he[0],g=he[1],Re=n.useRef(!1),Be=n.useRef(!1),nn=[];n.useEffect(function(){return function(){nn.forEach(function(u){return clearTimeout(u)}),nn.splice(0,nn.length)}},[]);var xn,$n=n.useState({}),qn=se($n,2)[1];Ue&&(xn=function(u){v(u)}),function(u,I,re,k){var z=n.useRef(null);z.current={open:I,triggerOpen:re,customizedTrigger:k},n.useEffect(function(){function de(ae){var le;if((le=z.current)===null||le===void 0||!le.customizedTrigger){var ue=ae.target;ue.shadowRoot&&ae.composed&&(ue=ae.composedPath()[0]||ue),z.current.open&&u().filter(function(Ie){return Ie}).every(function(Ie){return!Ie.contains(ue)&&Ie!==ue})&&z.current.triggerOpen(!1)}}return window.addEventListener("mousedown",de),function(){return window.removeEventListener("mousedown",de)}},[])}(function(){var u;return[Se.current,(u=ye.current)===null||u===void 0?void 0:u.getPopupElement()]},d,v,!!Ue);var In,Jn=n.useMemo(function(){return ee(ee({},e),{},{notFoundContent:P,open:t,triggerOpen:d,id:l,showSearch:Ee,multiple:me,toggleOpen:v})},[e,P,d,t,l,Ee,me,v]),Dn=!!Me||X;Dn&&(In=n.createElement(vn,{className:Ye("".concat(p,"-arrow"),ce({},"".concat(p,"-arrow-loading"),X)),customizeIcon:Me,customizeIconProps:{loading:X,searchValue:_e,open:t,focused:je,showSearch:Ee}}));var Rn,Mn=function(u,I,re,k,z){var de=arguments.length>5&&arguments[5]!==void 0&&arguments[5],ae=arguments.length>6?arguments[6]:void 0,le=arguments.length>7?arguments[7]:void 0,ue=hn.useMemo(function(){return mn(k)==="object"?k.clearIcon:z||void 0},[k,z]);return{allowClear:hn.useMemo(function(){return!(de||!k||!re.length&&!ae||le==="combobox"&&ae==="")},[k,de,re.length,ae,le]),clearIcon:hn.createElement(vn,{className:"".concat(u,"-clear"),onMouseDown:I,customizeIcon:ue},"×")}}(p,function(){var u;$==null||$(),(u=Pe.current)===null||u===void 0||u.focus(),G([],{type:"clear",values:R}),C("",!1,!1)},R,w,Oe,V,_e,D),Zn=Mn.allowClear,et=Mn.clearIcon,nt=n.createElement(be,{ref:xe}),tt=Ye(p,E,ce(ce(ce(ce(ce(ce(ce(ce(ce(ce({},"".concat(p,"-focused"),je),"".concat(p,"-multiple"),me),"".concat(p,"-single"),!me),"".concat(p,"-allow-clear"),w),"".concat(p,"-show-arrow"),Dn),"".concat(p,"-disabled"),V),"".concat(p,"-loading"),X),"".concat(p,"-open"),t),"".concat(p,"-customize-input"),Qe),"".concat(p,"-show-search"),Ee)),Nn=n.createElement(Vt,{ref:ye,disabled:V,prefixCls:p,visible:d,popupElement:nt,animation:Fe,transitionName:Te,dropdownStyle:We,dropdownClassName:Ke,direction:H,dropdownMatchSelectWidth:De,dropdownRender:ie,dropdownAlign:ke,placement:oe,builtinPlacements:ze,getPopupContainer:i,empty:b,getTriggerDOMNode:function(u){return Ne.current||u},onPopupVisibleChange:xn,onPopupMouseEnter:function(){qn({})}},Ue?n.cloneElement(Ue,{ref:ln}):n.createElement(Mt,Ge({},e,{domRef:Ne,prefixCls:p,inputElement:Qe,ref:Pe,id:l,showSearch:Ee,autoClearSearchValue:pe,mode:D,activeDescendantId:M,tagRender:B,values:R,open:t,onToggleOpen:v,activeValue:y,searchValue:_e,onSearch:C,onSearchSubmit:function(u){u&&u.trim()&&T(u,{source:"submit"})},onRemove:function(u){var I=R.filter(function(re){return re!==u});G(I,{type:"remove",values:[u]})},tokenWithEnter:W})));return Rn=Ue?Nn:n.createElement("div",Ge({className:tt},Ae,{ref:Se,onMouseDown:function(u){var I,re=u.target,k=(I=ye.current)===null||I===void 0?void 0:I.getPopupElement();if(k&&k.contains(re)){var z=setTimeout(function(){var ue,Ie=nn.indexOf(z);Ie!==-1&&nn.splice(Ie,1),un(),Ze||k.contains(document.activeElement)||(ue=Pe.current)===null||ue===void 0||ue.focus()});nn.push(z)}for(var de=arguments.length,ae=new Array(de>1?de-1:0),le=1;le<de;le++)ae[le-1]=arguments[le];ve==null||ve.apply(void 0,[u].concat(ae))},onKeyDown:function(u){var I,re=we(),k=u.key,z=k==="Enter";if(z&&(D!=="combobox"&&u.preventDefault(),t||v(!0)),g(!!_e),k==="Backspace"&&!re&&me&&!_e&&R.length){for(var de=Ve(R),ae=null,le=de.length-1;le>=0;le-=1){var ue=de[le];if(!ue.disabled){de.splice(le,1),ae=ue;break}}ae&&G(de,{type:"remove",values:[ae]})}for(var Ie=arguments.length,$e=new Array(Ie>1?Ie-1:0),qe=1;qe<Ie;qe++)$e[qe-1]=arguments[qe];!t||z&&Re.current||(I=xe.current)===null||I===void 0||I.onKeyDown.apply(I,[u].concat($e)),z&&(Re.current=!0),F==null||F.apply(void 0,[u].concat($e))},onKeyUp:function(u){for(var I=arguments.length,re=new Array(I>1?I-1:0),k=1;k<I;k++)re[k-1]=arguments[k];var z;t&&((z=xe.current)===null||z===void 0||z.onKeyUp.apply(z,[u].concat(re))),u.key==="Enter"&&(Re.current=!1),_==null||_.apply(void 0,[u].concat(re))},onFocus:function(){rn(!0),V||(f&&!Be.current&&f.apply(void 0,arguments),j.includes("focus")&&v(!0)),Be.current=!0},onBlur:function(){He.current=!0,rn(!1,function(){Be.current=!1,He.current=!1,v(!1)}),V||(_e&&(D==="tags"?T(_e,{source:"submit"}):D==="multiple"&&T("",{source:"blur"})),m&&m.apply(void 0,arguments))}}),n.createElement(Ot,{visible:je&&!t,values:R}),Nn,In,Zn&&et),n.createElement(Hn.Provider,{value:Jn},Rn)}),Xn=function(){return null};Xn.isSelectOptGroup=!0;var Yn=function(){return null};Yn.isSelectOption=!0;var Ft=["disabled","title","children","style","className"];function Ln(e){return typeof e=="string"||typeof e=="number"}var Kt=function(e,c){var o=n.useContext(Hn),l=o.prefixCls,p=o.id,E=o.open,S=o.multiple,B=o.mode,H=o.searchValue,ne=o.toggleOpen,R=o.notFoundContent,G=o.onPopupScroll,b=n.useContext(Sn),K=b.maxCount,P=b.flattenOptions,$=b.onActiveValue,D=b.defaultActiveFirstOption,V=b.onSelect,X=b.menuItemSelectedIcon,O=b.rawValues,N=b.fieldNames,te=b.virtual,Y=b.direction,Q=b.listHeight,y=b.listItemHeight,x=b.optionRender,M="".concat(l,"-item"),A=vt(function(){return P},[E,P],function(i,s){return s[0]&&i[1]!==s[1]}),pe=n.useRef(null),T=n.useMemo(function(){return S&&Cn(K)&&(O==null?void 0:O.size)>=K},[S,K,O==null?void 0:O.size]),fe=function(i){i.preventDefault()},L=function(i){var s;(s=pe.current)===null||s===void 0||s.scrollTo(typeof i=="number"?{index:i}:i)},w=function(i){for(var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,j=A.length,f=0;f<j;f+=1){var m=(i+f*s+j)%j,_=A[m]||{},F=_.group,ve=_.data;if(!(F||ve!=null&&ve.disabled||T))return m}return-1},Me=n.useState(function(){return w(0)}),Oe=se(Me,2),be=Oe[0],Fe=Oe[1],Te=function(i){var s=arguments.length>1&&arguments[1]!==void 0&&arguments[1];Fe(i);var j={source:s?"keyboard":"mouse"},f=A[i];f?$(f.value,i,j):$(null,-1,j)};n.useEffect(function(){Te(D!==!1?w(0):-1)},[A.length,H]);var We=n.useCallback(function(i){return O.has(i)&&B!=="combobox"},[B,Ve(O).toString(),O.size]);n.useEffect(function(){var i,s=setTimeout(function(){if(!S&&E&&O.size===1){var j=Array.from(O)[0],f=A.findIndex(function(m){return m.data.value===j});f!==-1&&(Te(f),L(f))}});return E&&((i=pe.current)===null||i===void 0||i.scrollTo(void 0)),function(){return clearTimeout(s)}},[E,H]);var Ke=function(i){i!==void 0&&V(i,{selected:!O.has(i)}),S||ne(!1)};if(n.useImperativeHandle(c,function(){return{onKeyDown:function(i){var s=i.which,j=i.ctrlKey;switch(s){case h.N:case h.P:case h.UP:case h.DOWN:var f=0;if(s===h.UP?f=-1:s===h.DOWN?f=1:/(mac\sos|macintosh)/i.test(navigator.appVersion)&&j&&(s===h.N?f=1:s===h.P&&(f=-1)),f!==0){var m=w(be+f,f);L(m),Te(m,!0)}break;case h.ENTER:var _,F=A[be];!F||F!=null&&(_=F.data)!==null&&_!==void 0&&_.disabled||T?Ke(void 0):Ke(F.value),E&&i.preventDefault();break;case h.ESC:ne(!1),E&&i.stopPropagation()}},onKeyUp:function(){},scrollTo:function(i){L(i)}}}),A.length===0)return n.createElement("div",{role:"listbox",id:"".concat(p,"_list"),className:"".concat(M,"-empty"),onMouseDown:fe},R);var De=Object.keys(N).map(function(i){return N[i]}),ie=function(i){return i.label};function ke(i,s){return{role:i.group?"presentation":"option",id:"".concat(p,"_list_").concat(s)}}var oe=function(i){var s=A[i];if(!s)return null;var j=s.data||{},f=j.value,m=s.group,_=fn(j,!0),F=ie(s);return s?n.createElement("div",Ge({"aria-label":typeof F!="string"||m?null:F},_,{key:i},ke(s,i),{"aria-selected":We(f)}),f):null},ze={role:"listbox",id:"".concat(p,"_list")};return n.createElement(n.Fragment,null,te&&n.createElement("div",Ge({},ze,{style:{height:0,width:0,overflow:"hidden"}}),oe(be-1),oe(be),oe(be+1)),n.createElement(Ct,{itemKey:"key",ref:pe,data:A,height:Q,itemHeight:y,fullHeight:!1,onMouseDown:fe,onScroll:G,virtual:te,direction:Y,innerProps:te?null:ze},function(i,s){var j=i.group,f=i.groupOption,m=i.data,_=i.label,F=i.value,ve=m.key;if(j){var Ce,me=(Ce=m.title)!==null&&Ce!==void 0?Ce:Ln(_)?_.toString():void 0;return n.createElement("div",{className:Ye(M,"".concat(M,"-group"),m.className),title:me},_!==void 0?_:ve)}var Ee=m.disabled,Ae=m.title;m.children;var on=m.style,Je=m.className,Ze=tn(m,Ft),ge=mt(Ze,De),Se=We(F),Ne=Ee||!Se&&T,ye="".concat(M,"-option"),Pe=Ye(M,ye,Je,ce(ce(ce(ce({},"".concat(ye,"-grouped"),f),"".concat(ye,"-active"),be===s&&!Ne),"".concat(ye,"-disabled"),Ne),"".concat(ye,"-selected"),Se)),xe=ie(i),He=!X||typeof X=="function"||Se,Xe=typeof xe=="number"?xe:xe||F,Le=Ln(Xe)?Xe.toString():void 0;return Ae!==void 0&&(Le=Ae),n.createElement("div",Ge({},fn(ge),te?{}:ke(i,s),{"aria-selected":Se,className:Pe,title:Le,onMouseMove:function(){be===s||Ne||Te(s)},onClick:function(){Ne||Ke(F)},style:on}),n.createElement("div",{className:"".concat(ye,"-content")},typeof x=="function"?x(i,{index:s}):Xe),n.isValidElement(X)||Se,He&&n.createElement(vn,{className:"".concat(M,"-option-state"),customizeIcon:X,customizeIconProps:{value:F,disabled:Ne,isSelected:Se}},Se?"✓":null))}))},Lt=n.forwardRef(Kt);function wn(e,c){return Bn(e).join("").toUpperCase().includes(c)}var _n=0,_t=gt();function Wt(e){var c=n.useState(),o=se(c,2),l=o[0],p=o[1];return n.useEffect(function(){var E;p("rc_select_".concat((_t?(E=_n,_n+=1):E="TEST_OR_SSR",E)))},[]),e||l}var zt=["children","value"],Ht=["children"];function Qn(e){var c=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return ht(e).map(function(o,l){if(!n.isValidElement(o)||!o.type)return null;var p=o,E=p.type.isSelectOptGroup,S=p.key,B=p.props,H=B.children,ne=tn(B,Ht);return c||!E?function(R){var G=R,b=G.key,K=G.props,P=K.children,$=K.value,D=tn(K,zt);return ee({key:b,value:$!==void 0?$:b,children:P},D)}(o):ee(ee({key:"__RC_SELECT_GRP__".concat(S===null?l:S,"__"),label:S},ne),{},{options:Qn(H)})}).filter(function(o){return o})}function Wn(e){var c=n.useRef();c.current=e;var o=n.useCallback(function(){return c.current.apply(c,arguments)},[]);return o}var jt=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],Ut=["inputValue"],zn=n.forwardRef(function(e,c){var o=e.id,l=e.mode,p=e.prefixCls,E=p===void 0?"rc-select":p,S=e.backfill,B=e.fieldNames,H=e.inputValue,ne=e.searchValue,R=e.onSearch,G=e.autoClearSearchValue,b=G===void 0||G,K=e.onSelect,P=e.onDeselect,$=e.dropdownMatchSelectWidth,D=$===void 0||$,V=e.filterOption,X=e.filterSort,O=e.optionFilterProp,N=e.optionLabelProp,te=e.options,Y=e.optionRender,Q=e.children,y=e.defaultActiveFirstOption,x=e.menuItemSelectedIcon,M=e.virtual,A=e.direction,pe=e.listHeight,T=pe===void 0?200:pe,fe=e.listItemHeight,L=fe===void 0?20:fe,w=e.labelRender,Me=e.value,Oe=e.defaultValue,be=e.labelInValue,Fe=e.onChange,Te=e.maxCount,We=tn(e,jt),Ke=Wt(o),De=En(l),ie=!(te||!Q),ke=n.useMemo(function(){return(V!==void 0||l!=="combobox")&&V},[V,l]),oe=n.useMemo(function(){return Kn(B,ie)},[JSON.stringify(B),ie]),ze=yn("",{value:ne!==void 0?ne:H,postState:function(r){return r||""}}),i=se(ze,2),s=i[0],j=i[1],f=function(r,t,a,d,v){return n.useMemo(function(){var W=r;!r&&(W=Qn(t));var q=new Map,J=new Map,U=function(C,Z,he){he&&typeof he=="string"&&C.set(Z[he],Z)};return function C(Z){for(var he=arguments.length>1&&arguments[1]!==void 0&&arguments[1],we=0;we<Z.length;we+=1){var g=Z[we];!g[a.options]||he?(q.set(g[a.value],g),U(J,g,a.label),U(J,g,d),U(J,g,v)):C(g[a.options],!0)}}(W),{options:W,valueOptions:q,labelOptions:J}},[r,t,a,d,v])}(te,Q,oe,O,N),m=f.valueOptions,_=f.labelOptions,F=f.options,ve=n.useCallback(function(r){return Bn(r).map(function(t){var a,d,v,W,q,J;(function(Z){return!Z||mn(Z)!=="object"})(t)?a=t:(v=t.key,d=t.label,a=(J=t.value)!==null&&J!==void 0?J:v);var U,C=m.get(a);return C&&(d===void 0&&(d=C==null?void 0:C[N||oe.label]),v===void 0&&(v=(U=C==null?void 0:C.key)!==null&&U!==void 0?U:a),W=C==null?void 0:C.disabled,q=C==null?void 0:C.title),{label:d,value:a,key:v,disabled:W,title:q}})},[oe,N,m]),Ce=yn(Oe,{value:Me}),me=se(Ce,2),Ee=me[0],Ae=me[1],on=n.useMemo(function(){var r,t=ve(De&&Ee===null?[]:Ee);return l==="combobox"&&function(a){return!a&&a!==0}((r=t[0])===null||r===void 0?void 0:r.value)?[]:t},[Ee,ve,l,De]),Je=function(r,t){var a=n.useRef({values:new Map,options:new Map});return[n.useMemo(function(){var d=a.current,v=d.values,W=d.options,q=r.map(function(C){var Z;return C.label===void 0?ee(ee({},C),{},{label:(Z=v.get(C.value))===null||Z===void 0?void 0:Z.label}):C}),J=new Map,U=new Map;return q.forEach(function(C){J.set(C.value,C),U.set(C.value,t.get(C.value)||W.get(C.value))}),a.current.values=J,a.current.options=U,q},[r,t]),n.useCallback(function(d){return t.get(d)||a.current.options.get(d)},[t])]}(on,m),Ze=se(Je,2),ge=Ze[0],Se=Ze[1],Ne=n.useMemo(function(){if(!l&&ge.length===1){var r=ge[0];if(r.value===null&&(r.label===null||r.label===void 0))return[]}return ge.map(function(t){var a;return ee(ee({},t),{},{label:(a=typeof w=="function"?w(t):t.label)!==null&&a!==void 0?a:t.value})})},[l,ge,w]),ye=n.useMemo(function(){return new Set(ge.map(function(r){return r.value}))},[ge]);n.useEffect(function(){if(l==="combobox"){var r,t=(r=ge[0])===null||r===void 0?void 0:r.value;j(function(a){return a!=null}(t)?String(t):"")}},[ge]);var Pe=Wn(function(r,t){var a=t??r;return ce(ce({},oe.value,r),oe.label,a)}),xe=function(r,t,a,d,v){return n.useMemo(function(){if(!a||d===!1)return r;var W=t.options,q=t.label,J=t.value,U=[],C=typeof d=="function",Z=a.toUpperCase(),he=C?d:function(g,Re){return v?wn(Re[v],Z):Re[W]?wn(Re[q!=="children"?q:"label"],Z):wn(Re[J],Z)},we=C?function(g){return bn(g)}:function(g){return g};return r.forEach(function(g){if(g[W])if(he(a,we(g)))U.push(g);else{var Re=g[W].filter(function(Be){return he(a,we(Be))});Re.length&&U.push(ee(ee({},g),{},ce({},W,Re)))}else he(a,we(g))&&U.push(g)}),U},[r,d,v,a,t])}(n.useMemo(function(){if(l!=="tags")return F;var r=Ve(F);return Ve(ge).sort(function(t,a){return t.value<a.value?-1:1}).forEach(function(t){var a=t.value;(function(d){return m.has(d)})(a)||r.push(Pe(a,t.label))}),r},[Pe,F,m,ge,l]),oe,s,ke,O),He=n.useMemo(function(){return l!=="tags"||!s||xe.some(function(r){return r[O||"value"]===s})||xe.some(function(r){return r[oe.value]===s})?xe:[Pe(s)].concat(Ve(xe))},[Pe,O,l,xe,s,oe]),Xe=n.useMemo(function(){return X?Ve(He).sort(function(r,t){return X(r,t,{searchValue:s})}):He},[He,X,s]),Le=n.useMemo(function(){return function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=t.fieldNames,d=t.childrenAsData,v=[],W=Kn(a,!1),q=W.label,J=W.value,U=W.options,C=W.groupLabel;return function Z(he,we){Array.isArray(he)&&he.forEach(function(g){if(we||!(U in g)){var Re=g[J];v.push({key:Fn(g,v.length),groupOption:we,data:g,label:g[q],value:Re})}else{var Be=g[C];Be===void 0&&d&&(Be=g.label),v.push({key:Fn(g,v.length),group:!0,data:g,label:Be}),Z(g[U],!0)}})}(r,!1),v}(Xe,{fieldNames:oe,childrenAsData:ie})},[Xe,oe,ie]),je=function(r){var t=ve(r);if(Ae(t),Fe&&(t.length!==ge.length||t.some(function(v,W){var q;return((q=ge[W])===null||q===void 0?void 0:q.value)!==(v==null?void 0:v.value)}))){var a=be?t:t.map(function(v){return v.value}),d=t.map(function(v){return bn(Se(v.value))});Fe(De?a:a[0],De?d:d[0])}},rn=n.useState(null),un=se(rn,2),_e=un[0],Qe=un[1],Ue=n.useState(0),ln=se(Ue,2),gn=ln[0],cn=ln[1],sn=y!==void 0?y:l!=="combobox",dn=n.useCallback(function(r,t){var a=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).source,d=a===void 0?"keyboard":a;cn(t),S&&l==="combobox"&&r!==null&&d==="keyboard"&&Qe(String(r))},[S,l]),en=function(r,t,a){var d=function(){var we,g=Se(r);return[be?{label:g==null?void 0:g[oe.label],value:r,key:(we=g==null?void 0:g.key)!==null&&we!==void 0?we:r}:r,bn(g)]};if(t&&K){var v=d(),W=se(v,2),q=W[0],J=W[1];K(q,J)}else if(!t&&P&&a!=="clear"){var U=d(),C=se(U,2),Z=C[0],he=C[1];P(Z,he)}},an=Wn(function(r,t){var a,d=!De||t.selected;a=d?De?[].concat(Ve(ge),[r]):[r]:ge.filter(function(v){return v.value!==r}),je(a),en(r,d),l==="combobox"?Qe(""):En&&!b||(j(""),Qe(""))}),pn=n.useMemo(function(){var r=M!==!1&&D!==!1;return ee(ee({},f),{},{flattenOptions:Le,onActiveValue:dn,defaultActiveFirstOption:sn,onSelect:an,menuItemSelectedIcon:x,rawValues:ye,fieldNames:oe,virtual:r,direction:A,listHeight:T,listItemHeight:L,childrenAsData:ie,maxCount:Te,optionRender:Y})},[Te,f,Le,dn,sn,an,x,ye,oe,M,D,A,T,L,ie,Y]);return n.createElement(Sn.Provider,{value:pn},n.createElement(At,Ge({},We,{id:Ke,prefixCls:E,ref:c,omitDomProps:Ut,mode:l,displayValues:Ne,onDisplayValuesChange:function(r,t){je(r);var a=t.type,d=t.values;a!=="remove"&&a!=="clear"||d.forEach(function(v){en(v.value,!1,a)})},direction:A,searchValue:s,onSearch:function(r,t){if(j(r),Qe(null),t.source!=="submit")t.source!=="blur"&&(l==="combobox"&&je(r),R==null||R(r));else{var a=(r||"").trim();if(a){var d=Array.from(new Set([].concat(Ve(ye),[a])));je(d),en(a,!0),j("")}}},autoClearSearchValue:b,onSearchSplit:function(r){var t=r;l!=="tags"&&(t=r.map(function(d){var v=_.get(d);return v==null?void 0:v.value}).filter(function(d){return d!==void 0}));var a=Array.from(new Set([].concat(Ve(ye),Ve(t))));je(a),a.forEach(function(d){en(d,!0)})},dropdownMatchSelectWidth:D,OptionList:Lt,emptyOptions:!Le.length,activeValue:_e,activeDescendantId:"".concat(Ke,"_list_").concat(gn)})))});zn.Option=Yn,zn.OptGroup=Xn;export{Yn as O,zn as T,Xn as a};
