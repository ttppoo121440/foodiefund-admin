import{e as i,d as Z,g as R,c as J}from"./@babel-D4-ut-Uz.js";import{P as ce}from"./@rc-component-DkdjcAXV.js";import{r as n,a as u}from"./react-Bi3d65_o.js";import{c as h}from"./classnames-BaEkKJlL.js";import{e as ie,A as re,m as ue,E as _,K as $}from"./rc-util-C7705Oj_.js";import{C as ae}from"./rc-motion-C1KiqwsE.js";var oe=n.createContext({});function ee(e,r,t){var a=r;return!a&&t&&(a="".concat(e,"-").concat(t)),a}function ne(e,r){var t=e["page".concat(r?"Y":"X","Offset")],a="scroll".concat(r?"Top":"Left");if(typeof t!="number"){var d=e.document;typeof(t=d.documentElement[a])!="number"&&(t=d.body[a])}return t}const de=n.memo(function(e){return e.children},function(e,r){return!r.shouldUpdate});var te={width:0,height:0,overflow:"hidden",outline:"none"},me={outline:"none"},fe=u.forwardRef(function(e,r){var t=e.prefixCls,a=e.className,d=e.style,o=e.title,f=e.ariaId,v=e.footer,l=e.closable,p=e.closeIcon,b=e.onClose,g=e.children,C=e.bodyStyle,w=e.bodyProps,I=e.modalRender,P=e.onMouseDown,M=e.onMouseUp,z=e.holderRef,S=e.visible,A=e.forceRender,y=e.width,E=e.height,s=e.classNames,c=e.styles,x=u.useContext(oe).panel,O=ie(z,x),K=n.useRef(),L=n.useRef(),B=n.useRef();u.useImperativeHandle(r,function(){return{focus:function(){var N;(N=B.current)===null||N===void 0||N.focus({preventScroll:!0})},changeActive:function(N){var W=document.activeElement;N&&W===L.current?K.current.focus({preventScroll:!0}):N||W!==K.current||L.current.focus({preventScroll:!0})}}});var k={};y!==void 0&&(k.width=y),E!==void 0&&(k.height=E);var T=v?u.createElement("div",{className:h("".concat(t,"-footer"),s==null?void 0:s.footer),style:i({},c==null?void 0:c.footer)},v):null,U=o?u.createElement("div",{className:h("".concat(t,"-header"),s==null?void 0:s.header),style:i({},c==null?void 0:c.header)},u.createElement("div",{className:"".concat(t,"-title"),id:f},o)):null,D=n.useMemo(function(){return Z(l)==="object"&&l!==null?l:l?{closeIcon:p??u.createElement("span",{className:"".concat(t,"-close-x")})}:{}},[l,p,t]),j=re(D,!0),Y=Z(l)==="object"&&l.disabled,H=l?u.createElement("button",R({type:"button",onClick:b,"aria-label":"Close"},j,{className:"".concat(t,"-close"),disabled:Y}),D.closeIcon):null,V=u.createElement("div",{className:h("".concat(t,"-content"),s==null?void 0:s.content),style:c==null?void 0:c.content},H,U,u.createElement("div",R({className:h("".concat(t,"-body"),s==null?void 0:s.body),style:i(i({},C),c==null?void 0:c.body)},w),g),T);return u.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":o?f:null,"aria-modal":"true",ref:O,style:i(i({},d),k),className:h(t,a),onMouseDown:P,onMouseUp:M},u.createElement("div",{tabIndex:0,ref:K,style:te,"aria-hidden":"true"}),u.createElement("div",{ref:B,tabIndex:-1,style:me},u.createElement(de,{shouldUpdate:S||A},I?I(V):V)),u.createElement("div",{tabIndex:0,ref:L,style:te,"aria-hidden":"true"}))}),le=n.forwardRef(function(e,r){var t=e.prefixCls,a=e.title,d=e.style,o=e.className,f=e.visible,v=e.forceRender,l=e.destroyOnClose,p=e.motionName,b=e.ariaId,g=e.onVisibleChanged,C=e.mousePosition,w=n.useRef(),I=n.useState(),P=J(I,2),M=P[0],z=P[1],S={};function A(){var y,E,s,c,x,O=(y=w.current,E=y.getBoundingClientRect(),s={left:E.left,top:E.top},c=y.ownerDocument,x=c.defaultView||c.parentWindow,s.left+=ne(x),s.top+=ne(x,!0),s);z(C&&(C.x||C.y)?"".concat(C.x-O.left,"px ").concat(C.y-O.top,"px"):"")}return M&&(S.transformOrigin=M),n.createElement(ae,{visible:f,onVisibleChanged:g,onAppearPrepare:A,onEnterPrepare:A,forceRender:v,motionName:p,removeOnLeave:l,ref:w},function(y,E){var s=y.className,c=y.style;return n.createElement(fe,R({},e,{ref:r,title:a,ariaId:b,prefixCls:t,holderRef:E,style:i(i(i({},c),d),S),className:h(o,s)}))})});le.displayName="Content";var ve=function(e){var r=e.prefixCls,t=e.style,a=e.visible,d=e.maskProps,o=e.motionName,f=e.className;return n.createElement(ae,{key:"mask",visible:a,motionName:o,leavedClassName:"".concat(r,"-mask-hidden")},function(v,l){var p=v.className,b=v.style;return n.createElement("div",R({ref:l,style:i(i({},b),t),className:h("".concat(r,"-mask"),p,f)},d))})},pe=function(e){var r=e.prefixCls,t=r===void 0?"rc-dialog":r,a=e.zIndex,d=e.visible,o=d!==void 0&&d,f=e.keyboard,v=f===void 0||f,l=e.focusTriggerAfterClose,p=l===void 0||l,b=e.wrapStyle,g=e.wrapClassName,C=e.wrapProps,w=e.onClose,I=e.afterOpenChange,P=e.afterClose,M=e.transitionName,z=e.animation,S=e.closable,A=S===void 0||S,y=e.mask,E=y===void 0||y,s=e.maskTransitionName,c=e.maskAnimation,x=e.maskClosable,O=x===void 0||x,K=e.maskStyle,L=e.maskProps,B=e.rootClassName,k=e.classNames,T=e.styles,U=n.useRef(),D=n.useRef(),j=n.useRef(),Y=n.useState(o),H=J(Y,2),V=H[0],N=H[1],W=ue();function q(m){w==null||w(m)}var X=n.useRef(!1),F=n.useRef(),Q=null;O&&(Q=function(m){X.current?X.current=!1:D.current===m.target&&q(m)}),n.useEffect(function(){o&&(N(!0),_(D.current,document.activeElement)||(U.current=document.activeElement))},[o]),n.useEffect(function(){return function(){clearTimeout(F.current)}},[]);var se=i(i(i({zIndex:a},b),T==null?void 0:T.wrapper),{},{display:V?null:"none"});return n.createElement("div",R({className:h("".concat(t,"-root"),B)},re(e,{data:!0})),n.createElement(ve,{prefixCls:t,visible:E&&o,motionName:ee(t,s,c),style:i(i({zIndex:a},K),T==null?void 0:T.mask),maskProps:L,className:k==null?void 0:k.mask}),n.createElement("div",R({tabIndex:-1,onKeyDown:function(m){if(v&&m.keyCode===$.ESC)return m.stopPropagation(),void q(m);o&&m.keyCode===$.TAB&&j.current.changeActive(!m.shiftKey)},className:h("".concat(t,"-wrap"),g,k==null?void 0:k.wrapper),ref:D,onClick:Q,style:se},C),n.createElement(le,R({},e,{onMouseDown:function(){clearTimeout(F.current),X.current=!0},onMouseUp:function(){F.current=setTimeout(function(){X.current=!1})},ref:j,closable:A,ariaId:W,prefixCls:t,visible:o&&V,onClose:q,onVisibleChanged:function(m){if(m)_(D.current,document.activeElement)||(G=j.current)===null||G===void 0||G.focus();else{if(N(!1),E&&U.current&&p){try{U.current.focus({preventScroll:!0})}catch{}U.current=null}V&&(P==null||P())}var G;I==null||I(m)},motionName:ee(t,M,z)}))))},ye=function(e){var r=e.visible,t=e.getContainer,a=e.forceRender,d=e.destroyOnClose,o=d!==void 0&&d,f=e.afterClose,v=e.panelRef,l=n.useState(r),p=J(l,2),b=p[0],g=p[1],C=n.useMemo(function(){return{panel:v}},[v]);return n.useEffect(function(){r&&g(!0)},[r]),a||!o||b?n.createElement(oe.Provider,{value:C},n.createElement(ce,{open:r||a||b,autoDestroy:!1,getContainer:t,autoLock:r||b},n.createElement(pe,R({},e,{destroyOnClose:o,afterClose:function(){f==null||f(),g(!1)}})))):null};ye.displayName="Dialog";export{ye as D,fe as P};
