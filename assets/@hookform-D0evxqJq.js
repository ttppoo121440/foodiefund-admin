import{g as l,s as u,a as y}from"./react-hook-form-DrtPsZaK.js";const d=(s,n,e)=>{if(s&&"reportValidity"in s){const r=l(e,n);s.setCustomValidity(r&&r.message||""),s.reportValidity()}},h=(s,n)=>{for(const e in n.fields){const r=n.fields[e];r&&r.ref&&"reportValidity"in r.ref?d(r.ref,e,s):r.refs&&r.refs.forEach(o=>d(o,e,s))}},p=(s,n)=>{n.shouldUseNativeValidation&&h(s,n);const e={};for(const r in s){const o=l(n.fields,r),i=Object.assign(s[r]||{},{ref:o&&o.ref});if(g(n.names||Object.keys(s),r)){const t=Object.assign({},l(e,r));u(t,"root",i),u(e,r,t)}else u(e,r,i)}return e},g=(s,n)=>s.some(e=>e.startsWith(n+"."));var E=function(s,n){for(var e={};s.length;){var r=s[0],o=r.code,i=r.message,t=r.path.join(".");if(!e[t])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];e[t]={message:a.message,type:a.code}}else e[t]={message:i,type:o};if("unionErrors"in r&&r.unionErrors.forEach(function(m){return m.errors.forEach(function(v){return s.push(v)})}),n){var c=e[t].types,f=c&&c[r.code];e[t]=y(t,n,e,o,f?[].concat(f,r.message):r.message)}s.shift()}return e},j=function(s,n,e){return e===void 0&&(e={}),function(r,o,i){try{return Promise.resolve(function(t,a){try{var c=Promise.resolve(s[e.mode==="sync"?"parse":"parseAsync"](r,n)).then(function(f){return i.shouldUseNativeValidation&&h({},i),{errors:{},values:e.raw?r:f}})}catch(f){return a(f)}return c&&c.then?c.then(void 0,a):c}(0,function(t){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(t))return{values:{},errors:p(E(t.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw t}))}catch(t){return Promise.reject(t)}}};export{j as t};
