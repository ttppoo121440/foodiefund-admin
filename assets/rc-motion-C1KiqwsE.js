import{k as de,h as Qe,i as Ze,a as $e,_ as Ge,d as Ee,c as z,e as o,b as k,j as Fe,g as Pn}from"./@babel-D4-ut-Uz.js";import{c as jn}from"./classnames-BaEkKJlL.js";import{c as ye,q as Ie,z as pe,M as Nn,i as Tn,h as On,s as Mn,N as Vn}from"./rc-util-C7705Oj_.js";import{r}from"./react-Bi3d65_o.js";var xn=["children"],Xe=r.createContext({});function Bn(e){var n=e.children,t=de(e,xn);return r.createElement(Xe.Provider,{value:t},n)}var zn=function(e){Qe(t,e);var n=Ze(t);function t(){return $e(this,t),n.apply(this,arguments)}return Ge(t,[{key:"render",value:function(){return this.props.children}}]),t}(r.Component),x="none",X="appear",Y="enter",B="leave",Ke="none",j="prepare",K="start",H="active",he="end",Ye="prepared";function He(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit".concat(e)]="webkit".concat(n),t["Moz".concat(e)]="moz".concat(n),t["ms".concat(e)]="MS".concat(n),t["O".concat(e)]="o".concat(n.toLowerCase()),t}var Ue,ce,ee,Dn=(Ue=ye(),ce=typeof window<"u"?window:{},ee={animationend:He("Animation","AnimationEnd"),transitionend:He("Transition","TransitionEnd")},Ue&&("AnimationEvent"in ce||delete ee.animationend.animation,"TransitionEvent"in ce||delete ee.transitionend.transition),ee),Be={};if(ye()){var Fn=document.createElement("div");Be=Fn.style}var ne={};function en(e){if(ne[e])return ne[e];var n=Dn[e];if(n)for(var t=Object.keys(n),a=t.length,C=0;C<a;C+=1){var f=t[C];if(Object.prototype.hasOwnProperty.call(n,f)&&f in Be)return ne[e]=n[f],ne[e]}return""}var nn=en("animationend"),tn=en("transitionend"),rn=!(!nn||!tn),We=nn||"animationend",_e=tn||"transitionend";function qe(e,n){return e?Ee(e)==="object"?e[n.replace(/-\w/g,function(t){return t[1].toUpperCase()})]:"".concat(e,"-").concat(n):null}const In=function(e){var n=r.useRef();function t(a){a&&(a.removeEventListener(_e,e),a.removeEventListener(We,e))}return r.useEffect(function(){return function(){t(n.current)}},[]),[function(a){n.current&&n.current!==a&&t(n.current),a&&a!==n.current&&(a.addEventListener(_e,e),a.addEventListener(We,e),n.current=a)},t]};var an=ye()?r.useLayoutEffect:r.useEffect,Kn=[j,K,H,he],Hn=[j,Ye],on=!1,Un=!0;function Je(e){return e===H||e===he}const Wn=function(e,n,t){var a=pe(Ke),C=z(a,2),f=C[0],d=C[1],R=function(){var i=r.useRef(null);function s(){Ie.cancel(i.current)}return r.useEffect(function(){return function(){s()}},[]),[function u(c){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;s();var M=Ie(function(){v<=1?c({isCanceled:function(){return M!==i.current}}):u(c,v-1)});i.current=M},s]}(),y=z(R,2),L=y[0],A=y[1],h=n?Hn:Kn;return an(function(){if(f!==Ke&&f!==he){var i=h.indexOf(f),s=h[i+1],u=t(f);u===on?d(s,!0):s&&L(function(c){function v(){c.isCanceled()||d(s,!0)}u===!0?v():Promise.resolve(u).then(v)})}},[e,f]),r.useEffect(function(){return function(){A()}},[]),[function(){d(j,!0)},f]},_n=function(e){var n=e;Ee(e)==="object"&&(n=e.transitionSupport);var t=r.forwardRef(function(a,C){var f=a.visible,d=f===void 0||f,R=a.removeOnLeave,y=R===void 0||R,L=a.forceRender,A=a.children,h=a.motionName,i=a.leavedClassName,s=a.eventProps,u=function(V,O){return!(!V.motionName||!n||O===!1)}(a,r.useContext(Xe).motion),c=r.useRef(),v=r.useRef(),M=function(V,O,un,m){var ke=m.motionEnter,te=ke===void 0||ke,Le=m.motionAppear,re=Le===void 0||Le,Ae=m.motionLeave,J=Ae===void 0||Ae,be=m.motionDeadline,cn=m.motionLeaveImmediately,sn=m.onAppearPrepare,fn=m.onEnterPrepare,vn=m.onLeavePrepare,ln=m.onAppearStart,mn=m.onEnterStart,dn=m.onLeaveStart,pn=m.onAppearActive,En=m.onEnterActive,yn=m.onLeaveActive,Ce=m.onAppearEnd,we=m.onEnterEnd,Re=m.onLeaveEnd,Se=m.onVisibleChanged,hn=pe(),Pe=z(hn,2),F=Pe[0],gn=Pe[1],kn=Nn(x),je=z(kn,2),Ne=je[0],Q=je[1],Ln=pe(null),Te=z(Ln,2),An=Te[0],Oe=Te[1],N=Ne(),ae=r.useRef(!1),oe=r.useRef(null);function Z(){return un()}var Me=r.useRef(!1);function Ve(){Q(x),Oe(null,!0)}var xe=Tn(function(E){var w=Ne();if(w!==x){var T=Z();if(!E||E.deadline||E.target===T){var $,G=Me.current;w===X&&G?$=Ce==null?void 0:Ce(T,E):w===Y&&G?$=we==null?void 0:we(T,E):w===B&&G&&($=Re==null?void 0:Re(T,E)),G&&$!==!1&&Ve()}}}),bn=In(xe),Cn=z(bn,1)[0],ze=function(E){switch(E){case X:return k(k(k({},j,sn),K,ln),H,pn);case Y:return k(k(k({},j,fn),K,mn),H,En);case B:return k(k(k({},j,vn),K,dn),H,yn);default:return{}}},_=r.useMemo(function(){return ze(N)},[N]),wn=Wn(N,!V,function(E){if(E===j){var w=_[j];return w?w(Z()):on}var T;return I in _&&Oe(((T=_[I])===null||T===void 0?void 0:T.call(_,Z(),null))||null),I===H&&N!==x&&(Cn(Z()),be>0&&(clearTimeout(oe.current),oe.current=setTimeout(function(){xe({deadline:!0})},be))),I===Ye&&Ve(),Un}),De=z(wn,2),Rn=De[0],I=De[1],Sn=Je(I);Me.current=Sn,an(function(){gn(O);var E,w=ae.current;ae.current=!0,!w&&O&&re&&(E=X),w&&O&&te&&(E=Y),(w&&!O&&J||!w&&cn&&!O&&J)&&(E=B);var T=ze(E);E&&(V||T[j])?(Q(E),Rn()):Q(x)},[O]),r.useEffect(function(){(N===X&&!re||N===Y&&!te||N===B&&!J)&&Q(x)},[re,te,J]),r.useEffect(function(){return function(){ae.current=!1,clearTimeout(oe.current)}},[]);var ie=r.useRef(!1);r.useEffect(function(){F&&(ie.current=!0),F!==void 0&&N===x&&((ie.current||F)&&(Se==null||Se(F)),ie.current=!0)},[F,N]);var ue=An;return _[j]&&I===K&&(ue=o({transition:"none"},ue)),[N,I,ue,F??O]}(u,d,function(){try{return c.current instanceof HTMLElement?c.current:Vn(v.current)}catch{return null}},a),S=z(M,4),b=S[0],p=S[1],l=S[2],g=S[3],D=r.useRef(g);g&&(D.current=!0);var P,U=r.useCallback(function(V){c.current=V,On(C,V)},[C]),q=o(o({},s),{},{visible:d});if(A)if(b===x)P=g?A(o({},q),U):!y&&D.current&&i?A(o(o({},q),{},{className:i}),U):L||!y&&!i?A(o(o({},q),{},{style:{display:"none"}}),U):null;else{var W;p===j?W="prepare":Je(p)?W="active":p===K&&(W="start");var ge=qe(h,"".concat(b,"-").concat(W));P=A(o(o({},q),{},{className:jn(qe(h,b),k(k({},ge,ge&&W),h,typeof h=="string")),style:l}),U)}else P=null;return r.isValidElement(P)&&Mn(P)&&(P.ref||(P=r.cloneElement(P,{ref:U}))),r.createElement(zn,{ref:v},P)});return t.displayName="CSSMotion",t}(rn);var se="add",fe="keep",ve="remove",le="removed";function qn(e){var n;return n=e&&Ee(e)==="object"&&"key"in e?e:{key:e},o(o({},n),{},{key:String(n.key)})}function me(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(qn)}var Jn=["component","children","onVisibleChanged","onAllRemoved"],Qn=["status"],Zn=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];const et=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_n,t=function(a){Qe(f,a);var C=Ze(f);function f(){var d;$e(this,f);for(var R=arguments.length,y=new Array(R),L=0;L<R;L++)y[L]=arguments[L];return d=C.call.apply(C,[this].concat(y)),k(Fe(d),"state",{keyEntities:[]}),k(Fe(d),"removeKey",function(A){var h=d.state.keyEntities.map(function(i){return i.key!==A?i:o(o({},i),{},{status:le})});return d.setState({keyEntities:h}),h.filter(function(i){return i.status!==le}).length}),d}return Ge(f,[{key:"render",value:function(){var d=this,R=this.state.keyEntities,y=this.props,L=y.component,A=y.children,h=y.onVisibleChanged,i=y.onAllRemoved,s=de(y,Jn),u=L||r.Fragment,c={};return Zn.forEach(function(v){c[v]=s[v],delete s[v]}),delete s.keys,r.createElement(u,s,R.map(function(v,M){var S=v.status,b=de(v,Qn),p=S===se||S===fe;return r.createElement(n,Pn({},c,{key:b.key,visible:p,eventProps:b,onVisibleChanged:function(l){h==null||h(l,{key:b.key}),l||d.removeKey(b.key)===0&&i&&i()}}),function(l,g){return A(o(o({},l),{},{index:M}),g)})}))}}],[{key:"getDerivedStateFromProps",value:function(d,R){var y=d.keys,L=R.keyEntities,A=me(y),h=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],u=[],c=0,v=s.length,M=me(i),S=me(s);M.forEach(function(p){for(var l=!1,g=c;g<v;g+=1){var D=S[g];if(D.key===p.key){c<g&&(u=u.concat(S.slice(c,g).map(function(P){return o(o({},P),{},{status:se})})),c=g),u.push(o(o({},D),{},{status:fe})),c+=1,l=!0;break}}l||u.push(o(o({},p),{},{status:ve}))}),c<v&&(u=u.concat(S.slice(c).map(function(p){return o(o({},p),{},{status:se})})));var b={};return u.forEach(function(p){var l=p.key;b[l]=(b[l]||0)+1}),Object.keys(b).filter(function(p){return b[p]>1}).forEach(function(p){(u=u.filter(function(l){var g=l.key,D=l.status;return g!==p||D!==ve})).forEach(function(l){l.key===p&&(l.status=fe)})}),u}(L,A);return{keyEntities:h.filter(function(i){var s=L.find(function(u){var c=u.key;return i.key===c});return!s||s.status!==le||i.status!==ve})}}}]),f}(r.Component);return k(t,"defaultProps",{component:"div"}),t}(rn);export{_n as C,Bn as M,et as a};
